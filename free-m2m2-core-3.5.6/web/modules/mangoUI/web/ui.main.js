(window.webpack_jsonp_mangoUI=window.webpack_jsonp_mangoUI||[]).push([[11],{3346:function(t,e){t.exports='<md-dialog flex="100" flex-gt-sm="80" flex-gt-md="60" flex-gt-lg="50" class="ma-ui-menu-editor-dialog" ng-form="$ctrl.menuItemEditForm">\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2 ng-if="!$ctrl.item.isNew" ma-tr="ui.app.editMenuItem"></h2>\n      <h2 ng-if="$ctrl.item.isNew" ma-tr="ui.app.createMenuItem"></h2>\n      <span flex></span>\n      <md-button class="md-icon-button" ng-click="$ctrl.cancel()">\n        <md-icon>close</md-icon>\n      </md-button>\n    </div>\n  </md-toolbar>\n  <md-dialog-content>\n    <div class="md-padding" layout="column">\n      <h3 ma-tr="ui.app.menuTextAndIcon"></h3>\n      <div layout>\n        <md-input-container class="has-hints" flex>\n            <label ma-tr="ui.app.menuText"></label>\n            <input name="menuText" ng-model="$ctrl.item.menuText" ng-change="$ctrl.menuTextChanged()" ng-required="!$ctrl.item.menuHidden && !$ctrl.item.menuTr">\n            <div class="hint" ng-hide="$ctrl.menuItemEditForm.menuText.$invalid && ($ctrl.menuItemEditForm.menuText.$touched || $ctrl.menuItemEditForm.$submitted)" ma-tr="ui.app.menuTextHint"></div>\n            <div ng-messages="$ctrl.menuItemEditForm.menuText.$error">\n              <div ng-message="required" ma-tr="ui.app.required"></div>\n            </div>\n        </md-input-container>\n        \n        <md-input-container class="has-hints" flex>\n          <label ma-tr="ui.app.menuTextTranslationKey"></label>\n          <input name="menuTr" ng-model="$ctrl.item.menuTr" ng-change="translation = ($ctrl.item.menuTr | maTr)"  ng-required="!$ctrl.item.menuHidden && !$ctrl.item.menuText">\n          <div class="hint" ng-hide="!$ctrl.item.menuTr || $ctrl.menuItemEditForm.menuTr.$invalid && ($ctrl.menuItemEditForm.menuTr.$touched || $ctrl.menuItemEditForm.$submitted)"\n                ma-tr="ui.app.previewX" ma-tr-args="[($ctrl.item.menuTr | maTr)]">\n          </div>\n          <div ng-messages="$ctrl.menuItemEditForm.menuTr.$error">\n            <div ng-message="required" ma-tr="ui.app.required"></div>\n          </div>\n        </md-input-container>\n      </div>\n      \n      <div layout>\n        <md-input-container class="has-hints" flex>\n            <label ma-tr="ui.app.menuIconName"></label>\n            <md-icon ng-class="$ctrl.item.menuIcon.indexOf(\'fa-\') === 0 ? \'fa fa-fw \' + $ctrl.item.menuIcon : \'\'" class="menu-icon"\n                style="pointer-events: none">{{$ctrl.item.menuIcon.indexOf(\'fa-\') !== 0 ? $ctrl.item.menuIcon : \'\'}}</md-icon>\n            <input name="menuIcon" ng-model="$ctrl.item.menuIcon">\n            <div class="hint"><span ma-tr="ui.app.menuIconNameHint1"></span> <a href="http://fontawesome.io/icons/" target="_blank">Font Awesome</a> <span ma-tr="ui.app.menuIconNameHint2"></span>\n              <a href="https://design.google.com/icons/" target="_blank">Material Icon</a> <span ma-tr="ui.app.menuIconNameHint3"></span></div>\n        </md-input-container>\n        \n        <md-input-container class="has-hints" flex>\n            <label ma-tr="ui.app.permissionRequired"></label>\n            <input name="permission" ng-model="$ctrl.item.permission" pattern="^\\s*[\\w-]+?\\s*(,\\s*[\\w-]+?\\s*)*$">\n            <div class="hint" ng-hide="$ctrl.menuItemEditForm.permission.$invalid && ($ctrl.menuItemEditForm.permission.$touched || $ctrl.menuItemEditForm.$submitted)" ma-tr="ui.app.permissionRequiredHint"></div>\n            <div ng-messages="$ctrl.menuItemEditForm.permission.$error">\n              <div ng-message="pattern" ma-tr="ui.app.invalidPermissions"></div>\n            </div>\n            <ma-permissions-menu ng-model="$ctrl.item.permission"></ma-permissions-menu>\n        </md-input-container>\n\n        <md-switch ng-model="$ctrl.item.showOnMenu" aria-label="{{\'ui.app.showMenuItem\'|maTr}}">\n          <span ma-tr="ui.app.showMenuItem"></span>\n        </md-switch>\n      </div>\n\n      <div layout="column" ng-show="!$ctrl.item.builtIn">\n      <h3 ma-tr="ui.app.stateNameAndUrl"></h3>\n      \n        <md-input-container flex>\n            <label ma-tr="ui.app.parentItem"></label>\n            <md-select name="parent" ng-model="$ctrl.item.parent" ng-disabled="$ctrl.item.builtIn" ng-change="$ctrl.parentChanged()" ng-model-options="{trackBy: \'$value.name\'}">\n              <md-option ng-value="$ctrl.root" ma-tr="ui.app.root"></md-option>\n              <md-option ng-value="menuItem" ng-repeat="menuItem in $ctrl.menuItems | orderBy:\'-builtIn\' track by menuItem.name">\n                <span ng-if="menuItem.menuText" ng-bind="menuItem.menuText"></span>\n                <span ng-if="!menuItem.menuText && menuItem.menuTr" ma-tr="{{menuItem.menuTr}}"></span>\n                (<span ng-bind="menuItem.name"></span>)\n              </md-option>\n            </md-select>\n        </md-input-container>\n        \n        <div layout="row">\n            <md-input-container class="has-hints" flex>\n                <label ma-tr="ui.app.stateName"></label>\n                <input name="stateName" required pattern="^\\w+$"\n                    ng-model="$ctrl.item.shortStateName" ng-disabled="$ctrl.item.builtIn" ng-change="$ctrl.stateNameChanged()">\n                <div class="hint" ng-hide="$ctrl.menuItemEditForm.stateName.$invalid && ($ctrl.menuItemEditForm.stateName.$touched || $ctrl.menuItemEditForm.$submitted)"\n                    ma-tr="ui.app.stateNameHint" ma-tr-args="[$ctrl.item.name]"></div>\n                <div ng-messages="$ctrl.menuItemEditForm.stateName.$error">\n                  <div ng-message="required" ma-tr="ui.app.required"></div>\n                  <div ng-message="pattern" ma-tr="ui.app.statePattern"></div>\n                  <div ng-message="stateExists" ma-tr="ui.app.stateExists"></div>\n                  <div ng-message="stateNameMustBeginWithParent" ma-tr="ui.app.stateNameMustBeginWithParent"></div>\n                </div>\n            </md-input-container>\n            \n            <md-input-container class="has-hints" flex ng-if="$ctrl.item.templateType !== \'href\'">\n                <label ma-tr="ui.app.urlPath"></label>\n                <input name="url" pattern="^\\^?\\/(?:[\\w\\-\\{\\}]+\\/)*[\\w\\-\\{\\}?&]+$" ng-required="!$ctrl.item.builtIn"\n                    ng-model="$ctrl.item.url" ng-disabled="$ctrl.item.builtIn" ng-change="$ctrl.urlChanged()">\n                <div class="hint" ng-hide="$ctrl.menuItemEditForm.url.$invalid && ($ctrl.menuItemEditForm.url.$touched || $ctrl.menuItemEditForm.$submitted)" ma-tr="ui.app.stateUrlHint"></div>\n                <div ng-messages="$ctrl.menuItemEditForm.url.$error">\n                  <div ng-message="required" ma-tr="ui.app.required"></div>\n                  <div ng-message="pattern" ma-tr="ui.app.invalidUrl"></div>\n                  <div ng-message="urlExists" ma-tr="ui.app.urlPathExists"></div>\n                </div>\n            </md-input-container>\n          </div>\n          <p layout layout-align="center" md-colors="{color: \'warn\'}"><small ma-tr="ui.app.editMenuNote"></small></p>\n\n          <h3 ma-tr="ui.app.linkToContent"></h3>\n          \n          <md-checkbox ng-model="$ctrl.item.abstract" ng-disabled="$ctrl.item.abstract && $ctrl.item.templateType === \'none\'">\n            <span ma-tr="ui.app.showItemAsFolder"></span>\n          </md-checkbox>\n          \n          <md-radio-group ng-model="$ctrl.item.templateType" ng-change="$ctrl.templateTypeChanged()" ng-disabled="$ctrl.item.builtIn || $ctrl.item.disableTemplateControls">\n            <div layout="row" layout-wrap>\n              <md-radio-button value="none" ng-disabled="!$ctrl.item.abstract"><span ma-tr="ui.app.noContent"></span></md-radio-button>\n              <md-radio-button value="linkToPage"><span ma-tr="ui.app.linkCustomPage"></span></md-radio-button>\n              <md-radio-button value="href"><span ma-tr="ui.app.externalLink"></span></md-radio-button>\n              <md-radio-button value="templateUrl"><span ma-tr="ui.app.templateUrl"></span></md-radio-button>\n            </div>\n          </md-radio-group>\n          \n          <md-input-container ng-if="$ctrl.item.templateType === \'linkToPage\'" flex>\n            <label ma-tr="ui.app.chooseCustomPage"></label>\n            <md-select name="pageXid" required ng-model="$ctrl.item.pageXid" ng-disabled="$ctrl.item.builtIn || $ctrl.item.disableTemplateControls">\n              <md-option></md-option>\n              <md-option ng-repeat="page in $ctrl.pages" ng-value="page.xid" ng-bind="page.name"></md-option>\n            </md-select>\n            <div ng-messages="$ctrl.menuItemEditForm.pageXid.$error">\n              <div ng-message="required" ma-tr="ui.app.required"></div>\n            </div>\n          </md-input-container>\n\n          <md-input-container ng-if="$ctrl.item.templateType === \'templateUrl\'" flex>\n              <label ma-tr="ui.app.templateUrl"></label>\n              <input name="templateUrl" required ng-model="$ctrl.item.templateUrl" ng-disabled="$ctrl.item.builtIn || $ctrl.item.disableTemplateControls">\n              <div class="hint" ma-tr="ui.app.templateUrlHint" ng-hide="$ctrl.menuItemEditForm.templateUrl.$invalid && ($ctrl.menuItemEditForm.templateUrl.$touched || $ctrl.menuItemEditForm.$submitted)"></div>\n              <div ng-messages="$ctrl.menuItemEditForm.templateUrl.$error">\n                <div ng-message="required" ma-tr="ui.app.required"></div>\n              </div>\n          </md-input-container>\n          \n          <div ng-if="$ctrl.item.templateType === \'href\'" flex layout>\n            <md-input-container flex="50">\n              <label ma-tr="ui.app.externalLink"></label>\n              <input name="href" required ng-model="$ctrl.item.href" ng-disabled="$ctrl.item.builtIn || $ctrl.item.disableTemplateControls">\n              <div class="hint" ng-hide="$ctrl.menuItemEditForm.href.$invalid && ($ctrl.menuItemEditForm.href.$touched || $ctrl.menuItemEditForm.$submitted)"></div>\n              <div ng-messages="$ctrl.menuItemEditForm.href.$error">\n                <div ng-message="required" ma-tr="ui.app.required"></div>\n              </div>\n            </md-input-container>\n            <md-input-container flex="50">\n              <label ma-tr="ui.app.targetWindow"></label>\n              <md-select name="target" required ng-model="$ctrl.item.target" ng-disabled="$ctrl.item.builtIn || $ctrl.item.disableTemplateControls">\n                <md-option value="_self"><span ma-tr="ui.app.selfWindow"></span></md-option>\n                <md-option value="_blank"><span ma-tr="ui.app.blankWindow"></span></md-option>\n                <md-option value="mango-legacy"><span ma-tr="ui.app.mangoLegacyWindow"></span></md-option>\n              </md-select>\n              <div class="hint" ng-hide="$ctrl.menuItemEditForm.target.$invalid && ($ctrl.menuItemEditForm.target.$touched || $ctrl.menuItemEditForm.$submitted)"></div>\n              <div ng-messages="$ctrl.menuItemEditForm.target.$error">\n                <div ng-message="required" ma-tr="ui.app.required"></div>\n              </div>\n            </md-input-container>\n          </div>\n\n          <h3 ma-tr="ui.app.dateBarSettings"></h3>\n          \n          <md-radio-group ng-model="$ctrl.item.dateBarOptions" ng-disabled="$ctrl.item.builtIn">\n            <div layout="row">\n              <md-radio-button value="none"><span ma-tr="ui.app.dateBarDisabled"></span></md-radio-button>\n              <md-radio-button value="date"><span ma-tr="ui.app.dateBarEnabled"></span></md-radio-button>\n              <md-radio-button value="dateAndRollup"><span ma-tr="ui.app.dateBarAndRollup"></span></md-radio-button>\n            </div>\n          </md-radio-group>\n      </div>\n      \n    </div>\n  </md-dialog-content>\n  \n  <md-dialog-actions layout="row">\n    <span flex></span>\n    <md-button class="md-warn" ng-click="$ctrl.deleteItem()" ng-if="!$ctrl.item.isNew" ng-disabled="$ctrl.item.builtIn" ma-tr="common.delete"></md-button>\n    <md-button ng-click="$ctrl.cancel()" ma-tr="common.cancel"></md-button>\n    <md-button ng-click="$ctrl.save()" class="md-primary" ma-tr="common.save"></md-button>\n  </md-dialog-actions>\n</md-dialog>\n'},3347:function(t,e){t.exports='<ul class="ma-ui-menu ma-ui-menu-level-1">\n  <li ng-repeat="item in $ctrl.menuItems | orderBy:[\'weight\', \'name\'] track by item.name" ng-if="$ctrl.isVisible(item)"\n      ng-hide="$ctrl.openSubmenu && $ctrl.openSubmenu.name !== item.name">\n    <ma-ui-menu-link menu-item="item" ng-if="!(item.children && item.abstract)"></ma-ui-menu-link>\n    <ma-ui-menu-toggle menu-item="item" open-menu="$ctrl.openMenu" ng-if="item.children && item.abstract"></ma-ui-menu-toggle>\n  </li>\n</ul>\n'},3348:function(t,e){t.exports='<md-button class="ma-ui-menu-link" ng-click="$ctrl.followLink($event)" ng-class="{\'menu-active\': $ctrl.menuActive, \'md-accent\': $ctrl.menuActive}" aria-label="{{$ctrl.menuText}}">\n  <a ng-href="{{$ctrl.href}}" target="{{$ctrl.target}}" class="ma-ui-menu-indent">\n    <md-icon ng-if="$ctrl.item.menuIcon && $ctrl.item.menuIcon.indexOf(\'fa-\') === 0" class="menu-icon fa fa-fw {{$ctrl.item.menuIcon}}"></md-icon>\n    <md-icon ng-if="$ctrl.item.menuIcon && $ctrl.item.menuIcon.indexOf(\'fa-\') !== 0" class="menu-icon">{{$ctrl.item.menuIcon}}</md-icon>\n    <span class="menu-text">{{$ctrl.menuText}}</span>\n  </a>\n</md-button>\n'},3349:function(t,e){t.exports='<div ui-sref-active="menu-active" ng-class="{\'ma-ui-menu-open\': $ctrl.isOpen, \'ma-ui-menu-submenu\': $ctrl.item.submenu}" class="ma-ui-menu-toggle">\n    <a ui-sref="{{$ctrl.item.name}}" style="display:none"></a>\n    <md-button class="ma-ui-menu-toggle-button ma-ui-menu-indent" ng-click="$ctrl.toggle()" aria-label="{{$ctrl.menuText}}">\n      <div flex layout="row">\n        <span>\n            <md-icon ng-if="$ctrl.item.menuIcon && $ctrl.item.menuIcon.indexOf(\'fa-\') === 0" class="menu-icon fa fa-fw {{$ctrl.item.menuIcon}}"></md-icon>\n            <md-icon ng-if="$ctrl.item.menuIcon && $ctrl.item.menuIcon.indexOf(\'fa-\') !== 0" class="menu-icon">{{$ctrl.item.menuIcon}}</md-icon>\n            <span class="menu-text">{{$ctrl.menuText}}</span>\n        </span>\n        <span flex></span>\n        <span class="ma-ui-menu-toggle-icon" ng-if="!$ctrl.item.submenu">\n          <md-icon>keyboard_arrow_up</md-icon>\n        </span>\n        <span class="menu-subdir-icon" ng-if="$ctrl.item.submenu">\n          <md-icon ng-if="!$ctrl.isOpen">subdirectory_arrow_right</md-icon>\n          <md-icon ng-if="$ctrl.isOpen">subdirectory_arrow_left</md-icon>\n        </span>\n      </div>\n    </md-button>\n    \n    <ul class="ma-ui-menu-toggle-list ng-hide" ng-show="$ctrl.isOpen" ng-class="\'ma-ui-menu-level-\' + ($ctrl.menuLevel + 1)">\n      <li ng-repeat="child in $ctrl.item.children | orderBy:[\'weight\', \'name\'] track by child.name" ng-if="$ctrl.isVisible(child)">\n        <ma-ui-menu-link menu-item="child" ng-if="!(child.children && child.abstract)"></ma-ui-menu-link>\n        <ma-ui-menu-toggle menu-item="child" open-menu="$ctrl.openMenu" ng-if="child.children && child.abstract"></ma-ui-menu-toggle>\n      </li>\n    </ul>\n</div>\n'},3350:function(t,e){t.exports='<md-button class="md-fab md-fab-bottom-right" style="position:fixed !important;" ng-click="editItem($event)">\n  <md-icon>add</md-icon>\n</md-button>\n\n<div class="ma-ui-menu-editor-buttons">\n  <md-button class="md-raised md-primary md-hue-3" ng-click="saveMenu($event)"><md-icon>save</md-icon> <span ma-tr="common.save"></span></md-button>\n  <md-button class="md-raised" ng-click="getHierarchy()"><md-icon>undo</md-icon> <span ma-tr="ui.app.undoChanges"></span></md-button>\n  <md-button class="md-raised md-warn" ng-click="deleteCustomMenu($event)"><md-icon>delete</md-icon> <span ma-tr="ui.app.deleteCustomMenu"></span></md-button>\n</div>\n\n<md-card class="ma-ui-menu-editor-container">\n  <md-toolbar class="md-whiteframe-z2 ma-ui-menu-editor-path md-hue-3">\n    <div class="md-toolbar-tools" layout layout-align="start center">\n      <strong ma-tr="ui.app.menuPath"></strong><strong>:&nbsp;</strong>\n      <span ng-repeat="pathItem in path track by $index" layout layout-align="start center">\n        <span ma-tr="{{pathItem.menuTr}}" ng-click="goToIndex($event, $index)">{{pathItem.menuText}}</span>\n        <md-icon ng-if="!$last">chevron_right</md-icon>\n      </span>\n    </div>\n  </md-toolbar>\n  <md-card-content>\n    <md-table-container>\n      <table md-table>\n        <thead md-head>\n          <tr>\n              <th md-column></th>\n              <th md-column ng-if="$mdMedia(\'gt-sm\')"></th>\n              <th md-column ng-if="$mdMedia(\'gt-xs\')" ma-tr="ui.app.menuText"></th>\n              <th md-column ma-tr="ui.app.stateName"></th>\n              <th md-column ng-if="$mdMedia(\'gt-md\')" ma-tr="ui.app.urlPath"></th>\n              <th md-column flex></th>\n            </tr>\n        </thead>\n        <tbody md-body ng-model="editItems" ui-sortable="uiSortableOptions">\n          <tr ng-repeat="menuItem in editItems track by menuItem.name">\n            <td>\n              <md-button class="md-icon-button" ng-if="menuItem.children && menuItem.children.length" ng-click="enterSubmenu($event, menuItem)">\n                <md-icon>subdirectory_arrow_right</md-icon>\n              </md-button>\n            </td>\n            <td ng-if="$mdMedia(\'gt-sm\')">\n              <md-switch ng-model="menuItem.menuHidden" ng-true-value="false" ng-false-value="true" aria-label="{{\'ui.app.showMenuItem\'|maTr}}"></md-switch>\n            </td>\n            <td ng-if="$mdMedia(\'gt-xs\') && menuItem.menuText" ng-bind="menuItem.menuText"></td>\n            <td ng-if="$mdMedia(\'gt-xs\') && !menuItem.menuText" ma-tr="{{menuItem.menuTr}}"></td>\n            <td ng-bind="menuItem.name"></td>\n            <td ng-bind="menuItem.url || menuItem.href" ng-if="$mdMedia(\'gt-md\')"></td>\n            <td>\n              <md-button class="md-icon-button" ng-click="editItem($event, menuItem)">\n                <md-icon>edit</md-icon>\n              </md-button>\n              <md-button class="md-icon-button" ng-click="removeItem(menuItem)" ng-disabled="menuItem.builtIn">\n                <md-icon>delete</md-icon>\n              </md-button>\n              <md-icon class="move-handle">reorder</md-icon>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </md-table-container>\n  </md-card-content>\n</md-card>'},3351:function(t,e){t.exports='<ma-ui-page-editor-controls on-page-changed="$ctrl.page = $page">\n    <extra-controls layout>\n        <md-switch ng-model="$ctrl.showEditor" ma-tr-aria-label="ui.app.editor" ng-change="$ctrl.showPreview = $ctrl.showEditor ? $ctrl.showPreview : true"><span ma-tr="ui.app.editor"></span></md-switch>\n        <md-switch ng-model="$ctrl.showPreview" ma-tr-aria-label="ui.app.preview" ng-change="$ctrl.showEditor = $ctrl.showPreview ? $ctrl.showEditor : true"><span ma-tr="ui.app.preview"></span></md-switch>\n    </extra-controls>\n</ma-ui-page-editor-controls>\n\n<div layout="column" layout-gt-md="row">\n    <div flex="100" layout="column" ng-show="$ctrl.showEditor" style="min-width: 50%;">\n        <md-card flex layout="column">\n            <md-card-title flex="nogrow">\n              <md-card-title-text>\n                <span class="md-headline" ma-tr="ui.app.editor"></span>\n              </md-card-title-text>\n            </md-card-title>\n            <md-card-content flex>\n              <ma-ace-editor style="height: 400px; min-height: 100%;"\n                    ng-model="$ctrl.page.jsonData.markup" ng-model-options="{debounce: 1000}"\n                    ng-change="$ctrl.markupChanged()">\n              </ma-ace-editor>\n            </md-card-content>\n        </md-card>\n    </div>\n    <div flex="100" ng-if="$ctrl.showPreview" style="min-width: 50%;">\n        <md-card>\n            <md-card-title>\n              <md-card-title-text>\n                <span class="md-headline" ma-tr="ui.app.preview"></span>\n              </md-card-title-text>\n            </md-card-title>\n            <md-card-content>\n                <div ma-ui-live-preview="$ctrl.page.jsonData.markup"></div>\n            </md-card-content>\n        </md-card>\n    </div>\n</div>\n'},3352:function(t,e){t.exports='<div layout="column" layout-gt-md="row" class="ma-ui-page-editor-inputs" ng-form="$ctrl.pageEditorForm">\n    <div flex="50" layout="column">\n        <div flex layout layout-align="start center" class="ma-ui-page-editor-top-row">\n            <md-input-container flex="flex" flex-gt-md="33">\n              <label ma-tr="ui.app.choosePageToEdit"></label>\n              <md-select name="pageSelector" ng-model="$ctrl.selectedPageSummary" ng-model-options="{trackBy: \'$value.xid\'}" ng-change="$ctrl.confirmLoadPage($ctrl.selectedPageSummary.xid)">\n                <md-option ng-repeat="page in $ctrl.pageList track by page.xid" ng-value="page" ng-bind="page.name"></md-option>\n              </md-select>\n            </md-input-container>\n            <md-button class="md-icon-button" ng-click="$ctrl.confirmLoadPage()">\n                <md-icon>add_box</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="ui.app.newPage"></span>\n                </md-tooltip>\n            </md-button>\n            <md-button class="md-icon-button md-primary" ng-click="$ctrl.savePage()" ng-disabled="!($ctrl.inputsDirty() || $ctrl.selectedPage.$dirty) || !$ctrl.pageSummaryStore">\n                <md-icon>save</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="common.save"></span>\n                </md-tooltip>\n            </md-button>\n            <md-button class="md-icon-button md-warn" ng-click="$ctrl.confirmDeletePage($event)" ng-disabled="$ctrl.selectedPage.isNew || !$ctrl.pageSummaryStore">\n              <md-icon>delete</md-icon>\n              <md-tooltip md-delay="150" md-direction="bottom" md-autohide><span ma-tr="ui.app.deletePage"></span></md-tooltip>\n            </md-button>\n            \x3c!-- \n            <md-button ng-click="$ctrl.confirmLoadPage($ctrl.selectedPageSummary.xid)" class="md-icon-button"\n                    ng-disabled="$ctrl.selectedPage.isNew || !($ctrl.pageEditorForm.$dirty || $ctrl.selectedPage.$dirty)">\n                <md-icon>undo</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="ui.app.revert"></span>\n                </md-tooltip>\n            </md-button>\n             --\x3e\n            <md-button ng-click="$ctrl.showInputs = !$ctrl.showInputs" class="md-icon-button" ng-class="{\'md-accent\': $ctrl.showInputs}">\n                <md-icon>edit</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="ui.app.editNameAndPermissions"></span>\n                </md-tooltip>\n            </md-button>\n            <md-button ng-click="$ctrl.showRevisionDialog($event)" class="md-icon-button">\n                <md-icon>history</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="ui.app.showRevisionHistory"></span>\n                </md-tooltip>\n            </md-button>\n            <md-button ng-click="$ctrl.editMenuItem($event)" class="md-icon-button" ng-disabled="$ctrl.selectedPage.isNew || !$ctrl.User.current.hasPermission($ctrl.MA_UI_EDIT_MENUS_PERMISSION)">\n                <md-icon>menu</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="ui.app.addEditMenuItem"></span>\n                </md-tooltip>\n            </md-button>\n            <md-button ng-href="{{$ctrl.viewPageLink}}" target="_blank" class="md-icon-button" ng-disabled="$ctrl.selectedPage.isNew">\n                <md-icon>remove_red_eye</md-icon>\n                <md-tooltip md-delay="150" md-direction="bottom" md-autohide>\n                    <span ma-tr="ui.app.viewPage"></span>\n                </md-tooltip>\n            </md-button>\n        </div>\n    \n        <div flex layout ng-show="$ctrl.showInputs" class="ng-hide">\n            <md-input-container flex>\n                <label ma-tr="ui.app.pageName"></label>\n                <input name="pageName" required ng-model="$ctrl.selectedPage.name">\n                <div ng-show="$ctrl.pageEditorForm.pageName.$invalid && ($ctrl.pageEditorForm.pageName.$touched || $ctrl.pageEditorForm.$submitted)">\n                  <div ng-messages="$ctrl.pageEditorForm.pageName.$error">\n                    <div ng-message="required" ma-tr="ui.app.required"></div>\n                  </div>\n                </div>\n            </md-input-container>\n            \x3c!-- \n            <md-input-container flex>\n                <label ma-tr="common.xid"></label>\n                <input name="xid" required ng-model="$ctrl.selectedPage.xid" disabled>\n                <div ng-messages="$ctrl.pageEditorForm.xid.$error">\n                  <div ng-message="required" ma-tr="ui.app.required"></div>\n                </div>\n            </md-input-container> --\x3e\n            <md-input-container flex>\n                <label ma-tr="ui.app.readPermission"></label>\n                <input name="readPermission" ng-model="$ctrl.selectedPage.readPermission" pattern="^\\s*[\\w-]+?\\s*(,\\s*[\\w-]+?\\s*)*$">\n                <div ng-messages="$ctrl.pageEditorForm.readPermission.$error">\n                  <div ng-message="pattern" ma-tr="ui.app.invalidPermissions"></div>\n                </div>\n                <ma-permissions-menu ng-model="$ctrl.selectedPage.readPermission"></ma-permissions-menu>\n            </md-input-container>\n            \n            <md-input-container flex>\n                <label ma-tr="ui.app.editPermission"></label>\n                <input name="editPermission" ng-model="$ctrl.selectedPage.editPermission" pattern="^\\s*[\\w-]+?\\s*(,\\s*[\\w-]+?\\s*)*$">\n                <div ng-messages="$ctrl.pageEditorForm.editPermission.$error">\n                  <div ng-message="pattern" ma-tr="ui.app.invalidPermissions"></div>\n                </div>\n                <ma-permissions-menu ng-model="$ctrl.selectedPage.editPermission"></ma-permissions-menu>\n            </md-input-container>\n        </div>\n    </div>\n\n    <div flex="50" layout layout-align="end start" ng-transclude="extraControls"></div>\n</div>\n'},3353:function(t,e){t.exports='<ul>\n  <li><a ui-sref="ui.examples.playArea({markup: text})" ma-tr="ui.app.copyToPlayArea"></a></li>\n  <li><a ui-sref="ui.settings.editPages({markup: text})" ma-tr="ui.app.copyToNewPage"></a></li>\n</ul>\n\n<div layout="column" layout-gt-md="row">\n    <div flex="100" layout="column" style="min-width: 50%;">\n        <md-card flex layout="column">\n            <md-card-title flex="nogrow">\n              <md-card-title-text>\n                <span class="md-headline" ma-tr="ui.dox.markup"></span>\n              </md-card-title-text>\n            </md-card-title>\n            <md-card-content flex layout="column">\n                <ma-ace-editor flex style="height:450px" ng-model="text" ng-model-options="{debounce: 1000}"></ma-ace-editor>\n            </md-card-content>\n        </md-card>\n    </div>\n    <div flex="100" style="min-width: 50%;">\n        <md-card>\n            <md-card-title>\n              <md-card-title-text>\n                <span class="md-headline" ma-tr="ui.dox.result"></span>\n              </md-card-title-text>\n            </md-card-title>\n            <md-card-content>\n                <div ma-ui-live-preview="text"></div>\n            </md-card-content>\n        </md-card>\n    </div>\n</div>\n'},3354:function(t,e){t.exports='<form name="autoLoginSettings">\n  <div layout="column">\n\n    <div class="md-padding ma-margin-bottom" md-colors="{background: \'warn\'}">\n        <div><strong ma-tr="ui.app.autoLoginWarning"></strong></div>\n        <div ma-tr="ui.app.autoLoginNote"></div>\n    </div>\n\n    <md-input-container>\n      <label ma-tr="login.userId"></label>\n      <input required name="username" ng-model="$ctrl.username" ng-change="$ctrl.checkUser()" ng-model-options="{debounce: 1000}">\n      <div ng-messages="autoLoginSettings.username.$error">\n        <div ng-message="required" ma-tr="ui.app.required"></div>\n        <div ng-message="adminUser" ma-tr="ui.app.cantBeAdminUser"></div>\n        <div ng-message="notFound" ma-tr="ui.app.userNotFound"></div>\n      </div>\n    </md-input-container>\n    \n    <md-input-container>\n      <label ma-tr="login.password"></label>\n      <input required name="password" ng-model="$ctrl.password">\n      <div ng-messages="autoLoginSettings.password.$error">\n        <div ng-message="required" ma-tr="ui.app.required"></div>\n      </div>\n    </md-input-container>\n    \n    <div><em ma-tr="ui.app.autoLoginTestManually"></em></div>\n    \n    <div>\n      <md-button type="submit" ng-click="$ctrl.saveCredentials()" ma-tr="common.save" class="md-primary md-raised" aria-label="{{\'common.save\'|maTr}}"></md-button>\n      <md-button ng-disabled="!$ctrl.storedUsername" ng-click="$ctrl.deleteCredentials()" ma-tr="common.delete" class="md-warn md-raised" aria-label="{{\'common.delete\'|maTr}}"></md-button>\n      \n      <span md-colors="{color: \'accent\'}" ng-if="$ctrl.storedUsername" ma-tr="ui.app.savedAutoLoginUser" ma-tr-args="[$ctrl.storedUsername]"></span>\n      <span md-colors="{color: \'accent\'}" ng-if="!$ctrl.storedUsername" ma-tr="ui.app.noSavedAutoLoginUser"></span>\n    </div>\n  </div>\n</form>'},3355:function(t,e){t.exports='<md-menu md-position-mode="target-right target" ng-if="$ctrl.events.totalCount">\n    <md-button aria-label="Active Events" class="md-icon-button ma-badge" ng-click="$mdMenu.open($event)">\n        <md-tooltip md-autohide ma-tr="ui.eventCount.unacknowledged" ma-tr-args="[$ctrl.events.totalCount]"></md-tooltip>\n        <md-icon md-menu-origin>alarm</md-icon>\n        <ma-badge md-colors="{\'background\': \'accent-hue-2\'}"><span ng-bind="$ctrl.renderCount($ctrl.events.totalCount)"></span></ma-badge>\n    </md-button>\n    <md-menu-content width="3">\n    \n        <md-menu-item>\n            <md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'any\'})">\n                <div layout="row" flex layout-align="start center" layout-fill>\n                    <i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-all" style="padding-right:10px"></i>\n                    <p flex ma-tr="ui.eventCount.unacknowledged" ma-tr-args="[$ctrl.events.totalCount]"></p>\n                </div>\n            </md-button>\n        </md-menu-item>\n        \n        <md-menu-item ng-if="$ctrl.events.NONE.unsilencedCount">\n            <md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'NONE\'})">\n                <div layout="row" flex layout-align="start center" layout-fill>\n                    <i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-none" style="padding-right:10px"></i>\n                    <p flex ma-tr="ui.eventCount.none" ma-tr-args="[$ctrl.events.NONE.unsilencedCount]"></p>\n                </div>\n            </md-button>\n        </md-menu-item>\n        \n        <md-menu-item ng-if="$ctrl.events.INFORMATION.unsilencedCount">\n            <md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'INFORMATION\'})">\n                <div layout="row" flex layout-align="start center" layout-fill>\n                    <i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-information" style="padding-right:10px"></i>\n                    <p flex ma-tr="ui.eventCount.information" ma-tr-args="[$ctrl.events.INFORMATION.unsilencedCount]"></p>\n                </div>\n            </md-button>\n        </md-menu-item>\n        \n        <md-menu-item ng-if="$ctrl.events.IMPORTANT.unsilencedCount">\n\t\t\t<md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'IMPORTANT\'})">\n\t\t\t\t<div layout="row" flex layout-align="start center" layout-fill>\n\t\t\t\t\t<i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-important" style="padding-right:10px"></i>\n\t\t\t\t\t<p flex ma-tr="ui.eventCount.important" ma-tr-args="[$ctrl.events.IMPORTANT.unsilencedCount]"></p>\n\t\t\t\t</div>\n\t\t\t</md-button>\n\t\t</md-menu-item>\n\t\t\n\t\t<md-menu-item ng-if="$ctrl.events.WARNING.unsilencedCount">\n\t\t\t<md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'WARNING\'})">\n\t\t\t\t<div layout="row" flex layout-align="start center" layout-fill>\n\t\t\t\t\t<i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-warning" style="padding-right:10px"></i>\n\t\t\t\t\t<p flex ma-tr="ui.eventCount.warning" ma-tr-args="[$ctrl.events.WARNING.unsilencedCount]"></p>\n\t\t\t\t</div>\n\t\t\t</md-button>\n\t\t</md-menu-item>\n        \n        <md-menu-item ng-if="$ctrl.events.URGENT.unsilencedCount">\n            <md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'URGENT\'})">\n                <div layout="row" flex layout-align="start center" layout-fill>\n                    <i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-urgent" style="padding-right:10px"></i>\n                    <p flex ma-tr="ui.eventCount.urgent" ma-tr-args="[$ctrl.events.URGENT.unsilencedCount]"></p>\n                </div>\n            </md-button>\n        </md-menu-item>\n        \n        <md-menu-item ng-if="$ctrl.events.CRITICAL.unsilencedCount">\n            <md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'CRITICAL\'})">\n                <div layout="row" flex layout-align="start center" layout-fill>\n                    <i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-critical" style="padding-right:10px"></i>\n                    <p flex ma-tr="ui.eventCount.critical" ma-tr-args="[$ctrl.events.CRITICAL.unsilencedCount]"></p>\n                </div>\n            </md-button>\n        </md-menu-item>\n        \n        <md-menu-item ng-if="$ctrl.events.LIFE_SAFETY.unsilencedCount">\n            <md-button ui-sref="ui.events({dateFilter: \'false\', acknowledged: \'false\', eventType: \'any\', alarmLevel: \'LIFE_SAFETY\'})">\n                <div layout="row" flex layout-align="start center" layout-fill>\n                    <i class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-life-safety" style="padding-right:10px"></i>\n                    <p flex ma-tr="ui.eventCount.safety" ma-tr-args="[$ctrl.events.LIFE_SAFETY.unsilencedCount]"></p>\n                </div>\n            </md-button>\n        </md-menu-item>\n\n    </md-menu-content>\n</md-menu>'},3356:function(t,e){t.exports='<md-toolbar class="md-whiteframe-glow-z1 md-hue-2 ma-ui-date-bar"\nng-class="{\'three-rows\': $ctrl.mdMedia(\'xs\') && ($ctrl.params.preset || $ctrl.stateParams.dateBar.rollupControls), \n\'four-rows\': $ctrl.stateParams.dateBar.rollupControls && $ctrl.mdMedia(\'xs\') && $ctrl.params.preset}">\n  <div class="md-toolbar-tools" ng-form="$ctrl.form" layout="row" layout-align="space-between center" layout-xs="column" layout-align-xs="center stretch">\n      <div layout="column" flex class="update-and-rollup">\n        <div layout layout-align="start center" ng-if="$ctrl.params.preset">\n            <div flex="70" layout layout-align="start center">\n                <md-checkbox name="autoUpdate" class="checkbox-top-label checkbox-centered" ng-model="$ctrl.params.autoUpdate">\n                    <span ma-tr="ui.app.autoUpdate"></span>\n                </md-checkbox>\n                <md-input-container flex>\n                    <label ma-tr="ui.app.updateIntervals"></label>\n                    <input name="updateIntervals" ng-model="$ctrl.params.updateIntervals" type="number" min="1" step="1"\n                        ng-disabled="!$ctrl.params.autoUpdate">\n                </md-input-container>\n                <md-input-container flex>\n                    <label ma-tr="ui.app.updateUnit"></label>\n                    <md-select name="updateIntervalPeriod" ng-model="$ctrl.params.updateIntervalPeriod" ng-disabled="!$ctrl.params.autoUpdate">\n                        <md-option ng-repeat="t in $ctrl.timePeriodTypes track by t.type" ng-value="t.type" ng-bind="t.label"></md-option>\n                    </md-select>\n                </md-input-container>\n            </div>\n        </div>\n        \n        <div layout layout-align="start center" ng-if="$ctrl.stateParams.dateBar.rollupControls">\n            <div ng-if="$ctrl.params.rollupType !== \'SIMPLIFY\'" flex="70" layout layout-align="start center">\n                <md-checkbox name="autoRollup" class="checkbox-top-label checkbox-centered" ng-model="$ctrl.params.autoRollup"\n                  ng-disabled="$ctrl.params.rollupType === \'NONE\'">\n                    <span ma-tr="ui.app.autoRollup"></span>\n                </md-checkbox>\n                <md-input-container flex>\n                    <label ma-tr="ui.app.rollupIntervals"></label>\n                    <input name="rollupIntervals" ng-model="$ctrl.params.rollupIntervals" type="number" min="1" step="1"\n                        ng-disabled="$ctrl.params.rollupType === \'NONE\' || $ctrl.params.autoRollup">\n                </md-input-container>\n                <md-input-container flex>\n                    <label ma-tr="ui.app.rollupUnit"></label>\n                    <md-select name="rollupIntervalPeriod" ng-model="$ctrl.params.rollupIntervalPeriod"\n                        ng-disabled="$ctrl.params.rollupType==\'NONE\' || $ctrl.params.autoRollup">\n                      <md-option ng-repeat="t in $ctrl.timePeriodTypes track by t.type" ng-value="t.type" ng-bind="t.label"></md-option>\n                    </md-select>\n                </md-input-container>\n            </div>\n            <div ng-if="$ctrl.params.rollupType === \'SIMPLIFY\'" flex="70" layout layout-align="start center">\n                <md-checkbox name="autoTolerance" class="checkbox-top-label checkbox-centered"\n                        ng-model="$ctrl.autoSimplifyTolerance" ng-change="$ctrl.params.simplifyTolerance = $ctrl.autoSimplifyTolerance ? -1 : 0">\n                    <span ma-tr="ui.app.autoSimplifyTolerance"></span>\n                </md-checkbox>\n                <md-input-container flex ng-if="!$ctrl.autoSimplifyTolerance">\n                    <label ma-tr="ui.app.simplifyTolerance"></label>\n                    <input name="simplifyTolerance" ng-model="$ctrl.params.simplifyTolerance" ng-model-options="{debounce: 500}" type="number" min="0">\n                </md-input-container>\n                <md-input-container flex ng-if="$ctrl.autoSimplifyTolerance">\n                    <label ma-tr="ui.app.simplifyTolerance"></label>\n                    <input name="simplifyTolerance" ng-init="auto=(\'ui.app.automatic\' | maTr)" ng-model="auto" ng-disabled="true">\n                </md-input-container>\n            </div>\n            <md-input-container flex="30">\n                <label ma-tr="ui.app.rollupType"></label>\n                <md-select name="rollupType" ng-model="$ctrl.params.rollupType">\n                    <md-option ng-repeat="t in $ctrl.rollupTypes | filter:$ctrl.params.rollupTypesFilter track by t.type" ng-value="t.type">\n                        <span ng-if="::t.type !== \'POINT_DEFAULT\'" ma-tr="{{::t.translation}}"></span>\n                        <em ng-if="::t.type === \'POINT_DEFAULT\'" ma-tr="{{::t.translation}}"></em>\n                    </md-option>\n                </md-select>\n            </md-input-container>\n        </div>\n      </div>\n\n      <div class="date-pickers" layout flex layout-align="start start" layout-wrap flex-order-xs="-1">\n        <div flex layout layout-align="start center" layout-wrap>\n          <md-input-container flex="50">\n            <label ma-tr="ui.app.fromDate"></label>\n            <ma-date-picker name="fromDate" ng-model="$ctrl.params.from" mode="date"></ma-date-picker>\n          </md-input-container>\n          <md-input-container flex="50">\n            <label ma-tr="ui.app.fromTime"></label>\n            <ma-date-picker name="fromTime" ng-model="$ctrl.params.from" mode="time"></ma-date-picker>\n          </md-input-container>\n          <md-input-container flex="50">\n            <label ma-tr="ui.app.toDate"></label>\n            <ma-date-picker name="toDate" ng-model="$ctrl.params.to" mode="date"></ma-date-picker>\n          </md-input-container>\n          <md-input-container flex="50">\n            <label ma-tr="ui.app.toTime"></label>\n            <ma-date-picker name="toTime" ng-model="$ctrl.params.to" mode="time"></ma-date-picker>\n          </md-input-container>\n        </div>\n        \n        <md-button flex="nogrow" class="md-icon-button" ng-click="$ctrl.onRefresh({\'$event\': $event})" aria-label="{{\'common.refresh\' | maTr}}" ng-disabled="!$ctrl.params.preset">\n          <md-tooltip><span ma-tr="ui.app.updateDateRange"></span></md-tooltip>\n          <md-icon>update</md-icon>\n        </md-button>\n      </div>\n  </div>\n</md-toolbar>'},3357:function(t,e){t.exports='<div><span ng-if="::$ctrl.coreModule.normalVersion" ma-tr="ui.app.poweredBy" ma-tr-args="::[$ctrl.productName + \' v\' + $ctrl.coreModule.normalVersion]"></span>\n  &copy;<span ng-bind="::$ctrl.year"></span>\n  <a ng-href="{{::$ctrl.coreModule.vendorUrl}}" target="_blank" ng-bind="::$ctrl.coreModule.vendor"></a>\n<span ma-tr="footer.rightsReserved"></span>.</div>\n<div flex></div>\n<em md-colors="::{color: \'warn\'}" ng-if="::$ctrl.coreModule && !$ctrl.coreModule.licenseType" ma-tr="footer.coreUnlicenced"></em>\n'},3358:function(t,e){t.exports='<div ng-if="$ctrl.availableUpgrades > 0 && !$ctrl.settings.dismissed"\n        layout layout-align="space-between center" md-colors="{background: \'background-hue-1\'}">\n    <div layout layout-align="start center">\n        <md-icon class="ma-upgrades-banner-info">info</md-icon>\n        <span ma-tr="ui.app.upgradesAvailable" ma-tr-args="[$ctrl.availableUpgrades]"></span>\n        &nbsp;<a ma-tr="ui.app.goToUpgradesPage" ui-sref="ui.settings.modules.upgrade"></a>\n    </div>\n    <div><md-button class="md-icon-button" ng-click="$ctrl.dismiss()">\n        <md-icon>close</md-icon>\n        <md-tooltip ma-tr="ui.app.dismiss"></md-tooltip>\n    </md-button></div>\n</div>\n'},3359:function(t,e,n){var a=n(3360);"string"==typeof a&&(a=[[t.i,a,""]]);var i={insertAt:{before:'meta[name="user-styles-after-here"]'},hmr:!0,transform:void 0,insertInto:void 0};n(33)(a,i);a.locals&&(t.exports=a.locals)},3360:function(t,e,n){(t.exports=n(32)(!1)).push([t.i,"ma-ui-upgrades-banner {\n\tdisplay: block;\n}\n\nma-ui-upgrades-banner .ma-upgrades-banner-info {\n\tmargin-right: 10px;\n}\n\nma-ui-upgrades-banner > div {\n\tpadding: 4px 16px;\n}\n\ndiv.main-application.ui_settings_modules_upgrade ma-ui-upgrades-banner {\n\tdisplay: none;\n}\n\nma-ui-upgrades-banner .md-button.md-icon-button {\n\tmargin: 0;\n}\n",""])},3361:function(t,e){t.exports='<md-dialog flex="100" flex-gt-sm="50" flex-gt-md="40" flex-gt-lg="30" class="download-point-values-dialog">\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2 ma-tr="ui.app.downloadPointValues"></h2>\n      <span flex></span>\n      <md-button class="md-icon-button" ng-click="$ctrl.cancel()">\n        <md-icon>close</md-icon>\n      </md-button>\n    </div>\n  </md-toolbar>\n  <md-dialog-content layout="column" class="md-padding">\n    <div layout flex="none"><strong flex="30" ma-tr="common.dateRangeFrom"></strong><span flex ng-bind="$ctrl.dateBar.from | maDate"></span></div>\n    <div layout flex="none"><strong flex="30" ma-tr="common.dateRangeTo"></strong><span flex ng-bind="$ctrl.dateBar.to | maDate"></span></div>\n    <div layout flex="none"><strong flex="30" ma-tr="ui.app.duration"></strong><span flex ng-bind="$ctrl.dateBar.to.valueOf() - $ctrl.dateBar.from.valueOf() | maDuration:\'humanize\'"></span></div>\n\n    <md-radio-group ng-model="$ctrl.allPoints" ng-change="$ctrl.saveSettings()">\n      <md-radio-button ng-value="false"><span ma-tr="ui.app.downloadDataForCheckedPoints"></span></md-radio-button>\n      <md-radio-button ng-value="true"><span ma-tr="ui.app.downloadDataForAllPoints"></span></md-radio-button>\n    </md-radio-group>\n    \n    <md-input-container>\n        <label ma-tr="ui.app.rollupType"></label>\n        <md-select name="rollupType" ng-model="$ctrl.rollupType" ng-change="$ctrl.saveSettings()">\n          <md-option ng-repeat="t in $ctrl.rollupTypes track by t.type" ng-value="t.type" ng-if="::t.type !== \'POINT_DEFAULT\'">\n            <span ma-tr="{{::t.translation}}"></span>\n          </md-option>\n        </md-select>\n    </md-input-container>\n    \n    <md-checkbox ng-model="$ctrl.customTimeFormat" ng-change="$ctrl.customTimeFormatChanged(); $ctrl.saveSettings()">\n        <span ma-tr="ui.app.customTimeFormat"></span>\n    </md-checkbox>\n    \n    <md-input-container ng-if="$ctrl.customTimeFormat">\n        <label ma-tr="ui.app.timeFormat"></label>\n        <input name="timeFormat" ng-model="$ctrl.timeFormat" ng-change="$ctrl.saveSettings()">\n    </md-input-container>\n    \n    <md-input-container ng-if="!$ctrl.customTimeFormat">\n        <label ma-tr="ui.app.timeFormat"></label>\n        <md-select name="timeFormat" ng-model="$ctrl.timeFormat" ng-change="$ctrl.saveSettings()">\n          <md-option ng-repeat="format in $ctrl.timeFormats track by format.format" ng-value="format.format">\n          \t<span ma-tr="{{::format.translation}}"></span>\n          </md-option>\n        </md-select>\n    </md-input-container>\n    \n    <md-input-container>\n        <label ma-tr="ui.app.timezone"></label>\n        <md-select name="timezone" ng-model="$ctrl.timezone" ng-change="$ctrl.saveSettings()">\n          <md-option ng-repeat="zone in $ctrl.timezones track by zone.id" ng-value="zone">\n            <span><span ma-tr="{{::zone.translation}}"></span> (<em ng-bind="zone.value"></em>)</span>\n          </md-option>\n        </md-select>\n    </md-input-container>\n    \n    <md-button class="md-raised" ng-click="$ctrl.downloadData(\'CSV\')" ng-disabled="$ctrl.downloadStatus.downloading">\n      <md-icon>file_download</md-icon> <span ma-tr="ui.app.csv"></span>\n    </md-button>\n    <md-button class="md-raised" ng-click="$ctrl.downloadData(\'CSV_COMBINED\')" ng-disabled="$ctrl.downloadStatus.downloading">\n      <md-icon>file_download</md-icon> <span ma-tr="ui.app.csvCombined"></span>\n    </md-button>\n      <md-button class="md-raised" ng-click="$ctrl.downloadData(\'JSON\')" ng-disabled="$ctrl.downloadStatus.downloading">\n    <md-icon>file_download</md-icon> <span ma-tr="ui.app.json"></span>\n    </md-button>\n    <md-button class="md-raised" ng-click="$ctrl.downloadData(\'JSON_COMBINED\')" ng-disabled="$ctrl.downloadStatus.downloading">\n      <md-icon>file_download</md-icon> <span ma-tr="ui.app.jsonCombined"></span>\n    </md-button>\n    \n    <div ng-if="$ctrl.downloadStatus.downloading" layout="column">\n      <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n      <md-button class="md-raised md-warn" ng-click="$ctrl.cancelDownload()">\n        <md-icon>cancel</md-icon> <span ma-tr="common.cancel"></span>\n      </md-button>\n    </div>\n    \n    <p md-colors="::{color: \'warn\'}" ng-if="$ctrl.downloadStatus.error" ma-tr="ui.app.errorDownloadingFile" ma-tr-args="[$ctrl.downloadStatus.error]"></p>\n  </md-dialog-content>\n</md-dialog>'},3362:function(t,e){t.exports='<div layout="row" flex="noshrink" ng-class="{\'watchlist-2-pane\': $ctrl.$mdMedia(\'gt-md\')}">\n    \n    <ma-point-browser flex="100" flex-gt-md="25" flex-gt-lg="20" ng-show="!$ctrl.watchList || $ctrl.$mdMedia(\'gt-md\')"\n        ng-model="$ctrl.watchList"\n        ng-change="$ctrl.watchListChanged()"\n        load-item="$ctrl.pointBrowserLoadItem">\n    </ma-point-browser>\n\n    <div flex layout="column" class="watchlist-main" ng-show="$ctrl.watchList">\n        <md-card class="watchlist-table" ng-include="\'watchList.table.html\'">\n        </md-card>\n        <md-card class="watchlist-chart" ng-if="$ctrl.selected.length" ng-include="\'watchList.chartAndStats.html\'">\n        </md-card>\n    </div>\n</div>\n'},3363:function(t,e){t.exports='<md-toolbar class="md-whiteframe-1dp md-hue-3">\n    <div class="md-toolbar-tools">\n        <h2 flex>\n            <span ma-tr="ui.app.chartAndCompare"></span>\n        </h2>\n        <md-button class="md-raised" ng-click="$ctrl.clearSelected()">\n            <md-icon>clear</md-icon>\n            <span ma-tr="ui.app.clear"></span>\n        </md-button>\n    </div>\n</md-toolbar>\n\n<md-tabs md-dynamic-height md-selected="currentTab">\n  <md-tab>\n    <md-tab-label><span ma-tr="ui.app.chart"></span></md-tab-label>\n    <md-tab-body>\n      <ma-watch-list-chart watch-list="$ctrl.chartWatchList" points="$ctrl.points" export="true" from="$ctrl.dateBar.from" to="$ctrl.dateBar.to"\n          rollup-type="$ctrl.dateBar.rollupType" rollup-intervals="$ctrl.dateBar.rollupIntervals"\n          rollup-interval-period="$ctrl.dateBar.rollupIntervalPeriod"\n          simplify-tolerance="$ctrl.dateBar.simplifyTolerance">\n      </ma-watch-list-chart>\n      \n      <div class="md-padding">\n        <div>\n            <md-checkbox ng-model="$ctrl.chartOptions.configNextPoint"><span ma-tr="ui.app.configureNextPoint"></span></md-checkbox>\n        </div>\n        <div ng-if="$ctrl.chartOptions.configNextPoint" layout layout-align="start center" layout-wrap>\n            <strong flex="100" flex-gt-xs="30" flex-gt-md="15" ma-tr="ui.app.configureNextPoint"></strong>\n            <div class="ma-color-picker-preview"\n                ng-click="$ctrl.showColorPicker($event, $ctrl.chartOptions, \'pointColor\')" role="button" tabindex="-1">\n              <div class="ma-color-picker-result" ng-style="{\'background-color\': $ctrl.chartOptions.pointColor}"></div>\n            </div>\n            \n            <md-input-container flex>\n            \t<label ma-tr="ui.app.lineColor"></label>\n                <input ng-model="$ctrl.chartOptions.pointColor" ng-model-options="{debounce: 1000}">\n            </md-input-container>\n            \n            <md-input-container flex>\n                <label ma-tr="ui.app.chartType"></label>\n                <md-select ng-model="$ctrl.chartOptions.pointChartType">\n                    <md-option value=""><em ma-tr="ui.app.clear"></em></md-option>\n                    <md-option value="smoothedLine" ma-tr="ui.app.smooth"></md-option>\n                    <md-option value="line" ma-tr="ui.app.line"></md-option>\n                    <md-option value="step" ma-tr="ui.app.step"></md-option>\n                    <md-option value="column" ma-tr="ui.app.bar"></md-option>\n                </md-select>\n            </md-input-container>\n\n            <md-input-container flex>\n                <label ma-tr="ui.app.pointAxis"></label>\n                <md-select ng-model="$ctrl.chartOptions.pointAxis">\n                    <md-option value=""><em ma-tr="ui.app.clear"></em></md-option>\n                    <md-option ng-repeat="axis in $ctrl.axisOptions track by axis.name" ng-value="axis.name">\n                        <span ma-tr="{{axis.translation}}"></span>\n                    </md-option>\n                </md-select>\n            </md-input-container>\n        </div>\n        \n        <div>\n            <md-checkbox ng-model="$ctrl.chartOptions.configAllPoints"><span ma-tr="ui.app.configureSeries"></span></md-checkbox>\n        </div>\n\n        <div ng-if="$ctrl.chartOptions.configAllPoints" ng-repeat="config in $ctrl.chartConfig.selectedPoints track by $index" layout layout-align="start center" layout-wrap>\n            <strong flex="100" flex-gt-xs="30" flex-gt-md="15">\n                <span ng-repeat="(key, value) in config.tags"><span ng-bind="value"></span><span ng-if="!$last"> &mdash; </span></span>\n            </strong>\n            <div class="ma-color-picker-preview"\n                ng-click="$ctrl.showColorPicker($event, config, \'lineColor\', true)" role="button" tabindex="-1">\n              <div class="ma-color-picker-result" ng-style="{\'background-color\': config.lineColor}"></div>\n            </div>\n\n            <md-input-container flex>\n                <label ma-tr="ui.app.lineColor"></label>\n                <input ma-empty-input="undefined" ng-model="config.lineColor" ng-model-options="{debounce: 1000}" ng-change="$ctrl.rebuildChart()">\n            </md-input-container>\n            \n            <md-input-container flex>\n                <label ma-tr="ui.app.chartType"></label>\n                <md-select ma-empty-input="undefined" ng-model="config.type" ng-change="$ctrl.rebuildChart()">\n                    <md-option value=""><em ma-tr="ui.app.clear"></em></md-option>\n                    <md-option value="smoothedLine" ma-tr="ui.app.smooth"></md-option>\n                    <md-option value="line" ma-tr="ui.app.line"></md-option>\n                    <md-option value="step" ma-tr="ui.app.step"></md-option>\n                    <md-option value="column" ma-tr="ui.app.bar"></md-option>\n                </md-select>\n            </md-input-container>\n\n            <md-input-container flex>\n                <label ma-tr="ui.app.pointAxis"></label>\n                <md-select ma-empty-input="undefined" ng-model="config.valueAxis" ng-change="$ctrl.rebuildChart()">\n                    <md-option value=""><em ma-tr="ui.app.clear"></em></md-option>\n                    <md-option ng-repeat="axis in $ctrl.axisOptions track by axis.name" ng-value="axis.name">\n                        <span ma-tr="{{axis.translation}}"></span>\n                    </md-option>\n                </md-select>\n            </md-input-container>\n        </div>\n\n        <div>\n            <md-checkbox ng-model="$ctrl.chartOptions.configAxes"><span ma-tr="ui.app.configureAxes"></span></md-checkbox>\n        </div>\n        <div ng-if="$ctrl.chartOptions.configAxes" ng-repeat="axis in $ctrl.axisOptions track by axis.name" layout="row" layout-align="start center" layout-wrap>\n            <strong flex="100" flex-gt-xs="15" flex-gt-md="10" ma-tr="{{axis.translation}}"></strong>\n            \n            <div flex="100" flex-gt-xs="85" flex-gt-md="90" layout layout-align="start center" layout-wrap>\n                <md-input-container flex="50" flex-gt-xs="33">\n                    <label ma-tr="ui.app.axisTitle"></label>\n                    <input ma-empty-input="undefined" ng-model="$ctrl.chartConfig.valueAxes[axis.name].title" ng-model-options="{debounce: 1000}" ng-change="$ctrl.rebuildChart()">\n                </md-input-container>\n                \n                <div flex="50" flex-gt-xs="33" layout layout-align="start center">\n                    <div class="ma-color-picker-preview"\n                        ng-click="$ctrl.chooseAxisColor($event, axis.name)" role="button" tabindex="-1">\n                      <div class="ma-color-picker-result" ng-style="{\'background-color\': $ctrl.chartConfig.valueAxes[axis.name].color}"></div>\n                    </div>\n                    \n                    <md-input-container flex>\n                        <label ma-tr="ui.app.axisColor"></label>\n                        <input ma-empty-input="undefined" ng-model="$ctrl.chartConfig.valueAxes[axis.name].color" ng-model-options="{debounce: 1000}" ng-change="$ctrl.rebuildChart()">\n                    </md-input-container>\n                </div>\n    \n                <md-input-container flex="50" flex-gt-xs="33">\n                    <label ma-tr="ui.app.stackType"></label>\n                    <md-select ma-empty-input="undefined" ng-model="$ctrl.chartConfig.valueAxes[axis.name].stackType" ng-change="$ctrl.rebuildChart()">\n                        <md-option value=""><em ma-tr="ui.app.clear"></em></md-option>\n                        <md-option value="none" ma-tr="ui.app.none"></md-option>\n                        <md-option value="regular" ma-tr="ui.app.stacked"></md-option>\n                        <md-option value="100%">100% <span ma-tr="ui.app.stacked"></span></md-option>\n                    </md-select>\n                </md-input-container>\n    \n                <md-input-container flex="50" flex-gt-xs="33">\n                    <label ma-tr="ui.app.axisMinimum"></label>\n                    <input ma-empty-input="undefined" type="number"\n                        ng-model="$ctrl.chartConfig.valueAxes[axis.name].minimum"\n                        ng-model-options="{debounce: 1000}" ng-change="$ctrl.rebuildChart()">\n                </md-input-container>\n    \n                <md-input-container flex="50" flex-gt-xs="33">\n                    <label ma-tr="ui.app.axisMaximum"></label>\n                    <input ma-empty-input="undefined" type="number"\n                        ng-model="$ctrl.chartConfig.valueAxes[axis.name].maximum"\n                        ng-model-options="{debounce: 1000}" ng-change="$ctrl.rebuildChart()">\n                </md-input-container>\n    \n                <md-input-container flex="50" flex-gt-xs="33">\n                    <label ma-tr="ui.app.axisGridCount"></label>\n                    <input ma-empty-input="undefined" type="number" min="0"\n                        ng-model="$ctrl.chartConfig.valueAxes[axis.name].gridCount"\n                        ng-model-options="{debounce: 1000}" ng-change="$ctrl.rebuildChart()">\n                </md-input-container>\n            </div>\n        </div>\n      </div>\n    </md-tab-body>\n  </md-tab>\n  \n  <md-tab>\n    <md-tab-label><span ma-tr="ui.app.stats"></span></md-tab-label>\n    <md-tab-body>\n      <md-table-container>\n        <table md-table ng-class="{\'desktop\': $ctrl.$mdMedia(\'gt-sm\')}">\n            <thead md-head md-order="tableOrder">\n                <tr md-row ma-fix-sort-icons>\n                    <th ng-repeat="tagKey in $ctrl.selectedTags" md-column\n                        md-order-by="tags.{{tagKey}}"\n                        ma-tr="ui.app.tag" ma-tr-args="[tagKey]">\n                    </th>\n                    <th md-column md-order-by="device" ma-tr="ui.app.device" ng-if="$ctrl.columnIsSelected(\'deviceName\')"></th>\n                    <th md-column md-order-by="name" ma-tr="ui.app.name" ng-if="$ctrl.columnIsSelected(\'name\')"></th>\n                    <th md-column md-numeric md-order-by="averageValue" ma-tr="ui.app.avg"></th>\n                    <th md-column md-numeric md-order-by="maximumValue" ma-tr="ui.app.max"></th>\n                    <th md-column md-numeric md-order-by="minimumValue" ma-tr="ui.app.min"></th>\n                    <th md-column md-numeric md-order-by="sumValue" ma-tr="ui.app.sum"></th>\n                    <th md-column md-numeric md-order-by="firstValue" ma-tr="ui.app.first"></th>\n                    <th md-column md-numeric md-order-by="lastValue" ma-tr="ui.app.last"></th>\n                    <th md-column md-numeric md-order-by="count" ma-tr="ui.app.count"></th>\n                </tr>\n            </thead>\n            <tbody md-body ng-init="tableOrder=\'device\'">\n                <tr md-row ng-repeat="point in $ctrl.selectedStats | orderBy: tableOrder track by point.xid">\n                    <td ng-repeat="tagKey in $ctrl.selectedTags" md-cell ng-bind="point[\'tags.\' + tagKey]"></td>\n                    <td md-cell ng-bind="point.device" ng-if="$ctrl.columnIsSelected(\'deviceName\')"></td>\n                    <td md-cell ng-bind="point.name" ng-if="$ctrl.columnIsSelected(\'name\')"></td>\n                    <td md-cell ng-bind="point.average"></td>\n                    <td md-cell ng-bind="point.maximum"></td>\n                    <td md-cell ng-bind="point.minimum"></td>\n                    <td md-cell ng-bind="point.sum"></td>\n                    <td md-cell ng-bind="point.first"></td>\n                    <td md-cell ng-bind="point.last"></td>\n                    <td md-cell ng-bind="point.count"></td>\n                </tr>\n            </tbody>\n        </table>\n      </md-table-container>\n    </md-tab-body>\n  </md-tab>\n</md-tabs>\n'},3364:function(t,e){t.exports='<md-toolbar class="md-whiteframe-1dp md-hue-3">\n    <div class="md-toolbar-tools">\n        <md-button class="watch-list-back md-icon-button" ng-click="$ctrl.clearWatchList()" ng-if="!$ctrl.$mdMedia(\'gt-md\')"><md-icon>arrow_back</md-icon></md-button>\n        <h2><span ng-bind="$ctrl.watchList.name" ng-if="$ctrl.$mdMedia(\'gt-md\')"></span></h2>\n        \n        <div flex></div>\n        \n        <md-button class="md-primary md-raised" ng-click="$ctrl.saveSettings()">\n            <md-icon>save</md-icon>\n            <span ma-tr="common.save"></span>\n            <md-tooltip>\n                <span ng-if="!$ctrl.watchList.isNew" ma-tr="ui.app.saveSettings"></span>\n                <span ng-if="$ctrl.watchList.isNew" ma-tr="ui.app.saveAsNewWatchList"></span>\n            </md-tooltip>\n        </md-button>\n        <md-button class="md-raised" ui-sref="ui.settings.watchListBuilder({watchListXid: $ctrl.watchList.xid})" ng-if="!$ctrl.watchList.isNew">\n            <md-icon>edit</md-icon>\n            <span ma-tr="common.edit"></span>\n        </md-button>\n        <md-button class="md-raised" ng-click="$ctrl.showDownloadDialog($event)">\n            <md-icon>file_download</md-icon>\n            <span ma-tr="common.download"></span>\n            <md-tooltip>\n                <span ma-tr="ui.app.downloadPointValues"></span>\n            </md-tooltip>\n        </md-button>\n        \n        <md-button class="md-icon-button" ng-click="$ctrl.selectColumnToolbarOpen = !$ctrl.selectColumnToolbarOpen">\n            <md-icon>{{$ctrl.selectColumnToolbarOpen ? \'keyboard_arrow_up\' : \'keyboard_arrow_down\'}}</md-icon>\n            <md-tooltip>\n                <span ma-tr="ui.app.selectColumns"></span>\n            </md-tooltip>\n        </md-button>\n    </div>\n</md-toolbar>\n<md-toolbar class="md-hue-2" ng-if="$ctrl.selectColumnToolbarOpen">\n    <div class="md-toolbar-tools">\n        <md-button class="md-icon-button" ng-click="$ctrl.sortOrder = \'\'; $ctrl.sortOrPageChangedBound()">\n            <md-icon>format_list_numbered</md-icon>\n            <md-tooltip ma-tr="ui.app.resetSort"></md-tooltip>\n        </md-button>\n        \n        <div flex></div>\n        \n        <ma-data-point-tag-key-select ng-model="$ctrl.selectedTags" ng-change="$ctrl.watchListSettingChanged()"\n                select-multiple="true" no-float="true" selected-text="\'ui.app.selectTags\' | maTr">\n        </ma-data-point-tag-key-select>\n\n        <md-input-container md-no-float="true">\n            <md-select md-selected-text="\'ui.app.selectColumns\' | maTr" multiple="true"\n                    ng-model="$ctrl.selectedColumns" ng-model-options="{trackBy: \'$value.name\'}" ng-change="$ctrl.watchListSettingChanged()">\n                <md-option ng-repeat="column in $ctrl.columns track by column.name" ng-value="column"><span ma-tr="{{column.label}}"></span></md-option>\n            </md-select>\n        </md-input-container>\n\n    </div>\n</md-toolbar>\n\n<ma-watch-list-parameters ng-if="$ctrl.watchList.hasParamOptions()" watch-list="$ctrl.watchList"\n    ng-model="$ctrl.watchListParams" ng-change="$ctrl.getPoints()"\n\tclass="parameter-inputs md-padding" layout layout-wrap>\n</ma-watch-list-parameters>\n\n<md-table-container ng-class="{\'lg-screen\': $ctrl.$mdMedia(\'gt-lg\')}">\n    <table md-table md-row-select multiple ng-model="$ctrl.selected"\n            md-progress="$ctrl.pointsPromise" ng-class="{\'desktop\': $ctrl.$mdMedia(\'gt-sm\')}" class="watch-list-table">\n        <thead md-head md-order="$ctrl.sortOrder" md-on-reorder="$ctrl.sortOrPageChangedBound">\n            <tr md-row ma-fix-sort-icons>\n                <th ng-repeat="tagKey in $ctrl.selectedTags" md-column\n                    md-order-by="tags.{{tagKey}}"\n                    ma-tr="ui.app.tag" ma-tr-args="[tagKey]">\n                </th>\n                <th ng-repeat="col in $ctrl.selectedColumns | orderBy:\'order\'" md-column\n                    md-order-by="{{col.name}}" \n                    ng-class="{\'point-value\': col.name === \'value\', \'point-time\': col.name === \'time\'}"\n                    ma-tr="{{col.label}}"\n                    md-numeric="col.name === \'value\'">\n                </th>\n            </tr>\n        </thead>\n        <tbody md-body>\n            <tr ng-repeat="point in $ctrl.filteredPoints"\n                    md-select="point" md-row md-select-id="xid"\n                    md-on-select="$ctrl.selectedPointsChangedBound"\n                    md-on-deselect="$ctrl.selectedPointsChangedBound">\n                <td ng-repeat="tagKey in $ctrl.selectedTags" md-cell ng-bind="point.tags[tagKey]"></td>\n                <td ng-repeat="col in $ctrl.selectedColumns | orderBy:\'order\'" md-cell\n                    ng-class="{\'point-value\': col.name === \'value\', \'point-time\': col.name === \'time\'}">\n                    \n                    <ma-point-value ng-if="col.name === \'value\'"\n                      point="point"\n                      flash-on-change="true"\n                      enable-popup="left">\n                    </ma-point-value>\n                    \n                    <ma-point-value ng-if="col.name === \'time\'"\n                        point="point"\n                        flash-on-change="true"\n                        display-type="dateTime"\n                        same-day-date-time-format="timeSeconds"\n                        hide-event-indicator="true">\n                    </ma-point-value>\n                    \n                    <span ng-if="col.name !== \'value\' && col.name !== \'time\'" ng-bind="point[col.name]"></span>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</md-table-container>\n\n<md-table-pagination md-limit="$ctrl.numberOfRows" md-limit-options="[10, 15, 25, 50, 100, 200]"\n    md-page="$ctrl.pageNumber" md-page-select\n    md-total="{{$ctrl.points.length}}"\n    md-on-paginate="$ctrl.sortOrPageChangedBound">\n</md-table-pagination>\n'},3365:function(t,e,n){var a=n(3366);"string"==typeof a&&(a=[[t.i,a,""]]);var i={insertAt:{before:'meta[name="user-styles-after-here"]'},hmr:!0,transform:void 0,insertInto:void 0};n(33)(a,i);a.locals&&(t.exports=a.locals)},3366:function(t,e,n){(t.exports=n(32)(!1)).push([t.i,"/* Table Component */\n\n.watchlist-main md-table-container {\n    padding-bottom: 10px;\n}\n\n.watchlist-main .md-toolbar-tools.mobile h2 {\n    line-height: 18px;\n    font-size: 16px;\n}\n.watchlist-main md-toolbar.md-table-toolbar form > input:focus {\n    outline: none;\n}\n.watchlist-main md-toolbar.md-table-toolbar form > input {\n    width: 100%;\n    margin-left: 16px;\n    border: none;\n}\n.watchlist-main th.md-checkbox-column > md-checkbox {\n    display: none;\n}\n.watchlist-main table.md-table:not(.desktop) td.md-cell, .watchlist-main table.md-table:not(.desktop) th.md-column {\n    padding: 0 4px 0 4px !important;\n}\n.watchlist-main table.md-table:not(.desktop) td.md-cell, .watchlist-main table.md-table:not(.desktop) th.md-column {\n    font-size: 1.1rem;\n}\n.watchlist-main table.md-table:not(.desktop)  td.md-cell.icons {\n    font-size: 1.5rem;\n}\n\n.watchlist-main table.md-table td.md-cell {\n    transition: color 0.2s;\n}\n\ntable.md-table.md-row-select.watch-list-table th.md-column.point-value,\ntable.md-table.md-row-select.watch-list-table td.md-cell.point-value {\n\twidth: 100px;\n}\n\n.watchlist-main .md-table-pagination {\n  border: 0;\n}\n\n/* Pagination mobile fixes*/\n.watchlist-main .md-table-pagination,\n.watch-list-stats-dialog .md-table-pagination {\n    padding: 0 10px 0 0;\n}\n.watchlist-main .md-table-pagination md-select,\n.watch-list-stats-dialog .md-table-pagination md-select {\n    min-width: 40px;\n}\n.watchlist-main .md-table-pagination > .buttons > .label + .md-button.md-icon-button,\n.watch-list-stats-dialog .md-table-pagination > .buttons > .label + .md-button.md-icon-button {\n    margin-left: 10px;\n}\n\n.watchlist-2-pane .watchlist-main {\n \tmargin-left: 16px;\n}\n\n.watchlist-main md-card {\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.watchlist-main md-card:first-child {\n  margin-top: 0;\n}\n\n.watchlist-main md-card:last-child {\n  margin-bottom: 0;\n}\n\nma-ui-watch-list-page .watch-list-back.md-button {\n  margin-left: 0;\n  margin-right: 0;\n}\n\nma-ui-watch-list-page ma-watch-list-chart {\n  height: 400px;\n  width: 100%;\n}\nma-ui-watch-list-page ma-watch-list-chart path.amcharts-graph-stroke {\n    stroke-width: 2.5px;\n    stroke-opacity: .7;\n}\nma-ui-watch-list-page ma-watch-list-chart path.amcharts-graph-fill {\n    fill-opacity: 0.5;\n}\n\nma-ui-watch-list-page ma-watch-list-parameters md-input-container {\n  margin-bottom: 0;\n}\n\n/* md-autocomplete must have the margin at the bottom or the drop down shows up covering the input */\nma-ui-watch-list-page ma-watch-list-parameters md-autocomplete md-input-container {\n  margin-bottom: 18px;\n}\n\nma-ui-watch-list-page .md-table-pagination > * {\n  height: 32px;\n}\n\nma-ui-watch-list-page ma-point-value img {\n\tmax-width: 200px;\n\tmax-height: 200px;\n}\n\nma-ui-watch-list-page ma-point-value > md-fab-speed-dial[md-direction=left] {\n\ttop: -5px;\n}\n\nma-ui-watch-list-page table.md-table.md-row-select.watch-list-table md-checkbox .md-container:after {\n\ttop: -2px;\n\tbottom: -2px;\n}",""])},3367:function(t,e){t.exports='<ma-point-values point="myPoint" values="pointValues" from="$ctrl.dateBar.from" to="$ctrl.dateBar.to"\n    rendered="true"\n    rollup="{{$ctrl.dateBar.rollupType}}"\n    rollup-interval="{{$ctrl.dateBar.rollupIntervals}} {{$ctrl.dateBar.rollupIntervalPeriod}}"\n    auto-rollup-interval="$ctrl.dateBar.autoRollup"\n    simplify-tolerance="$ctrl.dateBar.simplifyTolerance">\n</ma-point-values>\n\n<ma-point-values point="myPoint" values="realtimePointValues" realtime="$ctrl.realtimeMode" rendered="true" latest="$ctrl.numValues" use-cache="$ctrl.showCachedData"\n    refresh="$ctrl.refreshTable"></ma-point-values>\n\n<ma-point-statistics point="myPoint" from="$ctrl.dateBar.from" to="$ctrl.dateBar.to" statistics="statsObj"></ma-point-statistics>\n\n<div layout="row" layout-wrap class="data-point-details-page">\n    <div flex="100" layout="column" layout-gt-md="row" class="ma-dpd-row-container">\n        <div flex-gt-md="50" class="ma-dpd-point-value">\n            <md-card>\n            \t<md-toolbar class="md-whiteframe-1dp md-hue-3">\n            \t\t<div class="md-toolbar-tools">\n            \t\t\t<h2>\n                          <span ng-bind="myPoint.formatLabel()"></span>\n            \t        </h2>\n            \t\t</div>\n            \t</md-toolbar>\n            \t<md-card-content flex layout="column" layout-align="space-between stretch">\n            \t\t<ma-filtering-point-list ng-model="selectedPoint" ng-change="$ctrl.pointChanged(selectedPoint)" auto-init="true"\n                        point-xid="{{$ctrl.pointXid}}" point-id="$ctrl.pointId"></ma-filtering-point-list>\n            \t\t\n            \t\t<div layout="row" layout-wrap class="point-details">\n            \t\t\t<div flex="100" layout layout-align="start center">\n                          <label flex="35" layout layout-align="end center">\n                            <md-button class="md-icon-button force-read" ng-click="myPoint.forceRead()">\n                                <md-tooltip><span ma-tr="ui.app.forceRead"></span></md-tooltip>\n                                <md-icon>refresh</md-icon>\n                            </md-button>\n                            <span><span ma-tr="ui.app.value"></span>:</span>\n                          </label>\n                          <div class="point-value" flex="65">\n                            <ma-point-value point="myPoint" flash-on-change="true" disable-event-popup="true"></ma-point-value>\n                          </div>\n                        </div>\n            \t\t\t<label flex="35"><span ma-tr="ui.app.time"></span>:</label> \n                        <ma-point-value flex="65" display-type="dateTime" flash-on-change="true" same-day-date-time-format="timeSeconds" point="myPoint"\n            \t\t\thide-event-indicator="true"></ma-point-value>\n                        <label flex="35"><span ma-tr="ui.app.xid"></span>:</label><div flex="65" ng-bind="myPoint.xid"></div>\n            \t\t\t<label flex="35"><span ma-tr="ui.app.path"></span>:</label><div flex="65"><span ng-repeat="folder in $ctrl.path track by $index"><span ng-bind="folder"></span> <span ng-if="!$last"> &gt; </span></span></div>\n                        <label flex="35"><span ma-tr="ui.app.tags"></span>:</label>\n                        <div flex="65">\n                            <div ng-repeat="(key, value) in myPoint.tags"><span ng-bind="key"></span>=<span ng-bind="value"></span></div>\n                        </div>\n                        <label flex="35"><span ma-tr="ui.app.dataSource"></span>:</label><div flex="65" ng-bind="myPoint.dataSourceName"></div>\n            \t\t</div>\n                    \n            \t\t<div layout="row">\n            \t\t\t<ma-set-point-value ng-if="myPoint.pointLocator.dataType !== \'IMAGE\'" point="myPoint" flex="95"></ma-set-point-value>\n            \t\t\t<md-button class="md-accent md-raised" ng-show="$ctrl.User.current.hasPermission(\'superadmin\')"\n                            ng-href="/data_point_edit.shtm?dpid={{myPoint.id}}" target="_blank"><md-icon>open_in_new</md-icon> <span ma-tr="ui.app.edit"></span></md-button>\n            \t\t</div>\n            \t</md-card-content>\n            </md-card>\n        </div>\n        \n        <div flex-gt-md="50" layout="column" class="ma-dpd-value-table">\n            <md-card flex>\n                <md-toolbar class="md-whiteframe-1dp md-hue-3">\n                    <div class="md-toolbar-tools">\n                        <h2 ma-tr="ui.app.pointValueHistory"></h2>\n                        <md-button ng-show="!$ctrl.realtimeMode" class="md-icon-button dpd-table-refresh" ng-click="$ctrl.refreshTable = {}">\n                            <md-tooltip><span ma-tr="ui.app.refreshTable"></span></md-tooltip>\n                            <md-icon>refresh</md-icon>\n                        </md-button>\n                        <span flex></span>\n                        <md-checkbox ng-model="$ctrl.showTableOptions">\n                            <span ma-tr="ui.app.configure"></span>\n                        </md-checkbox>\n                    </div>\n                </md-toolbar>\n                <md-toolbar class="md-padding md-hue-2" ng-show="$ctrl.showTableOptions" layout layout-wrap layout-align="space-between center">\n                    <span class="dpd-num-values">\n                        <md-input-container md-no-float>\n                            <input id="number-of-values" ng-model="$ctrl.numValues" type="number" ng-change="$ctrl.updatePreferences()">\n                        </md-input-container>\n                        <label ma-tr="ui.app.numberOfValues" for="number-of-values"></label>\n                    </span>\n                    <md-switch ng-model="$ctrl.realtimeMode" ng-change="$ctrl.showCachedData = $ctrl.realtimeMode ? false : $ctrl.showCachedData; $ctrl.updatePreferences()">\n                        <span ma-tr="ui.app.realtime"></span>\n                    </md-switch>\n                    <md-switch ng-disabled="$ctrl.realtimeMode" ng-model="$ctrl.showCachedData" ng-change="$ctrl.updatePreferences()">\n                        <span ma-tr="pointDetails.useCache"></span>\n                    </md-switch>\n                </md-toolbar>\n                <md-table-container ng-init="myOrder=\'-timestamp\'">\n                    <table md-table class="ma-point-values-table">\n                        <thead md-head md-order="myOrder">\n                            <tr md-row>\n                                <th md-column md-order-by="timestamp" ma-tr="ui.app.time"></th>\n                                <th md-column md-order-by="value" ma-tr="ui.app.pointValue"></th>\n                            </tr>\n                        </thead>\n                        <tbody md-body ng-class="{\'ma-point-values-non-realtime\' : !$ctrl.realtimeMode}" ng-if="realtimePointValues">\n                            <tr md-row ng-repeat="value in realtimePointValues | orderBy: myOrder track by $index" ng-class="{\'ma-point-value-cached\': value.cached}">\n                                <td md-cell ng-bind="value.timestamp | maDate:\'shortDateTimeSeconds\'"></td>\n                                <td ng-if="myPoint.pointLocator.dataType !== \'IMAGE\'" md-cell>\n                                <span ng-bind="value.rendered" ng-style="{color: myPoint.valueRenderer(value.value).color}"></span> <strong ng-if="value.annotation"><em>(<span ng-bind="value.annotation"></span>)</em></strong>\n                                </td>\n                                <td ng-if="myPoint.pointLocator.dataType == \'IMAGE\'" md-cell><img ng-src="{{value.value}}" alt="{{value.annotation||\'\'}}" class="imageValue"></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </md-table-container>\n            </md-card>\n        </div>\n    </div>\n\n    <div flex="100" layout="column" layout-gt-md="row" class="ma-dpd-row-container">\n        <div flex-gt-md="50" class="ma-dpd-point-statistics">\n        \t<md-card>\n        \t\t<md-toolbar class="md-whiteframe-1dp md-hue-3">\n        \t\t\t<div class="md-toolbar-tools">\n        \t\t\t\t<h2><span ma-tr="ui.app.pointStatistics"></span></h2>\n        \t\t\t</div>\n        \t\t</md-toolbar>\n                <md-card-content>\n        \t\t  <ma-statistics-table statistics="statsObj"></ma-statistics-table>\n                </md-card-content>\n        \t</md-card>\n        </div>\n        \n        <div flex-gt-md="50" layout="column" class="ma-dpd-user-comments">\n            <md-card flex>\n                <md-toolbar class="md-whiteframe-1dp md-hue-3">\n                    <div class="md-toolbar-tools">\n                        <h2><span ma-tr="ui.app.userComments"></span></h2>\n                        <div flex></div>\n                        <md-button ng-hide="disabled" class="md-icon-button" ng-click="addNote($event)">\n                            <md-icon>add</md-icon>\n                            <md-tooltip><span ma-tr="notes.addNote"></span></md-tooltip>\n                        </md-button>\n                    </div>\n                </md-toolbar>\n                <ma-user-notes-table reference-id="myPoint.id" comment-type="POINT" add-note="addNote"></ma-user-notes-table>\n            </md-card>\n        </div>\n    </div>\n    \n    <div flex="100" class="ma-dpd-chart" ng-if="myPoint.pointLocator.dataType !== \'ALPHANUMERIC\' && myPoint.pointLocator.dataType !== \'IMAGE\'">\n        <md-card>\n        \t<md-toolbar class="md-whiteframe-1dp md-hue-3">\n        \t\t<div class="md-toolbar-tools">\n        \t\t\t<h2 flex>\n        \t\t\t\t  <span ma-tr="ui.app.chart"></span>\n        \t\t\t</h2>\n        \t\t\t<md-select ng-model="$ctrl.chartType" aria-label="Chart Type">\n        \t\t\t\t<md-option value="smoothedLine" ma-tr="ui.app.smooth"></md-option>\n        \t\t\t\t<md-option value="line" ma-tr="ui.app.line"></md-option>\n        \t\t\t\t<md-option value="step" ma-tr="ui.app.step"></md-option>\n        \t\t\t\t<md-option value="column" ma-tr="ui.app.bar"></md-option>\n        \t\t\t</md-select>\n        \t\t</div>\n        \t</md-toolbar>\n        \t<ma-serial-chart style="width: 100%" series-1-values="pointValues" series-1-point="myPoint" series-1-type="{{$ctrl.chartType}}" legend="false" balloon="true" export="true">\n        \t</ma-serial-chart>\n        </md-card>\n    </div>\n    \n    <div flex="100" class="ma-dpd-image-slider" ng-if="myPoint.pointLocator.dataType == \'IMAGE\'">\n        <md-card>\n          <md-toolbar class="md-whiteframe-1dp md-hue-3">\n            <div class="md-toolbar-tools">\n              <h2 flex>\n                  <span ma-tr="ui.app.images"></span>\n              </h2>\n            </div>\n          </md-toolbar>\n          <md-card-content>\n              <ma-image-slider point-values="pointValues"></ma-image-slider>\n          </md-card-content>\n        </md-card>\n    </div>\n    \n    <div flex="100" class="ma-dpd-image-slider">\n        <md-card>\n        \t<md-toolbar class="md-whiteframe-1dp md-hue-3">\n        \t\t<div class="md-toolbar-tools">\n        \t\t\t<h2 flex>\n        \t\t\t\t  <span ma-tr="ui.app.pointEvents"></span>\n        \t\t\t</h2>\n        \t\t</div>\n        \t</md-toolbar>\n        \t<ma-events-table single-point="true" point-id="myPoint.id" limit="15" from="$ctrl.dateBar.from" to="$ctrl.dateBar.to" sort="\'-activeTimestamp\'" hide-link="DATA_POINT"></ma-events-table>\n        </md-card>\n    </div>\n</div>'},3368:function(t,e){t.exports='<md-card class="events-page">\n      <md-toolbar class="md-whiteframe-1dp md-hue-3">\n            <div class="md-toolbar-tools">\n                  <h2 flex>\n                    <span ma-tr="ui.app.eventsTable"></span>\n                  </h2>\n                  \n                  <h2 style="padding-right: 5px;" ng-if="$ctrl.$mdMedia(\'gt-xs\')">\n                        <span><span ma-tr="ui.app.dateFilter"></span>: </span>\n                  </h2>\n                  <md-switch ng-model="$ctrl.params.dateFilter" aria-label="{{\'ui.app.dateFilter\' | maTr}}" ng-change="$ctrl.storeState(\'dateFilter\')"></md-switch>\n\n                    <md-button class="md-raised md-primary md-hue-1" ng-class="{ \'active md-accent\': $ctrl.params.eventType === \'any\' }"\n                            ng-click="$ctrl.params.eventType=\'any\'; $ctrl.storeState(\'eventType\')" ma-tr="ui.app.any">\n                    </md-button>\n                    <md-button class="md-raised md-primary md-hue-1" ng-class="{ \'active md-accent\': $ctrl.params.eventType === \'DATA_POINT\' }"\n                            ng-click="$ctrl.params.eventType=\'DATA_POINT\'; $ctrl.storeState(\'eventType\')">\n                        <span ng-if="$ctrl.$mdMedia(\'gt-sm\')" ma-tr="ui.app.data"></span>\n                        <span ma-tr="ui.app.point"></span>\n                    </md-button>\n                    <md-button class="md-raised md-primary md-hue-1" ng-class="{ \'active md-accent\': $ctrl.params.eventType === \'DATA_SOURCE\' }"\n                            ng-click="$ctrl.params.eventType=\'DATA_SOURCE\'; $ctrl.storeState(\'eventType\')">\n                        <span ng-if="$ctrl.$mdMedia(\'gt-sm\')" ma-tr="ui.app.data"></span>\n                        <span ma-tr="ui.app.source"></span>\n                    </md-button>\n                    <md-button class="md-raised md-primary md-hue-1" ng-class="{ \'active md-accent\': $ctrl.params.eventType === \'SYSTEM\' }"\n                            ng-click="$ctrl.params.eventType=\'SYSTEM\'; $ctrl.storeState(\'eventType\')" ma-tr="ui.app.system">\n                    </md-button>\n            </div>\n      </md-toolbar>\n      <md-card-actions layout="row" layout-align="start center" layout-wrap>\n            <md-input-container flex>\n                  <label ma-tr="ui.app.alarmLvl"></label>\n                  <md-select ng-model="$ctrl.params.alarmLevel" ng-change="$ctrl.storeState(\'alarmLevel\')">\n                        <md-option value="any"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-all"></md-icon><span ma-tr="ui.app.any"></span></md-option>\n                        <md-option value="NONE"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-none"></md-icon><span ma-tr="ui.app.none"></span></md-option>\n                        <md-option value="INFORMATION"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-information"></md-icon><span ma-tr="ui.app.information"></span></md-option>\n                        <md-option value="IMPORTANT"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-important"></md-icon><span ma-tr="ui.app.important"></span></md-option>\n\t\t\t\t\t\t<md-option value="WARNING"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-warning"></md-icon><span ma-tr="ui.app.warning"></span></md-option>\n                        <md-option value="URGENT"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-urgent"></md-icon><span ma-tr="ui.app.urgent"></span></md-option>\n                        <md-option value="CRITICAL"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-critical"></md-icon><span ma-tr="ui.app.critical"></span></md-option>\n                        <md-option value="LIFE_SAFETY"><md-icon class="fa fa-flag fa-lg ma-alarm-flag ma-alarm-level-life-safety"></md-icon><span ma-tr="ui.app.safety"></span></md-option>\n                  </md-select>\n            </md-input-container>\n            <md-input-container flex>\n                  <label ma-tr="ui.app.activeStatus"></label>\n                  <md-select ng-model="$ctrl.params.activeStatus" ng-change="$ctrl.storeState(\'activeStatus\')">\n                        <md-option value="any"><span ma-tr="ui.app.any"></span></md-option>\n                        <md-option value="active"><span ma-tr="ui.app.active"></span></md-option>\n                        <md-option value="noRtn"><span ma-tr="ui.app.noRtn"></span></md-option>\n                        <md-option value="normal"><span ma-tr="ui.app.returnedToNormal"></span></md-option>\n                  </md-select>\n            </md-input-container>\n            <md-input-container flex>\n                  <label ma-tr="ui.app.acknowledgedStatus"></label>\n                  <md-select ng-model="$ctrl.params.acknowledged" ng-change="$ctrl.storeState(\'acknowledged\')">\n                        <md-option ng-value="\'any\'"><span ma-tr="ui.app.any"></span></md-option>\n                        <md-option ng-value="true"><span ma-tr="ui.app.acknowledged"></span></md-option>\n                        <md-option ng-value="false"><span ma-tr="ui.app.unAcknowledged"></span></md-option>\n                  </md-select>\n            </md-input-container>\n      </md-card-actions>\n      <ma-events-table event-type="$ctrl.params.eventType" alarm-level="$ctrl.params.alarmLevel" acknowledged="$ctrl.params.acknowledged"\n        event-id="eventId" active-status="$ctrl.params.activeStatus" date-filter="$ctrl.params.dateFilter"\n        from="$ctrl.dateBar.from" to="$ctrl.dateBar.to" limit="50" sort="$ctrl.sort"></ma-events-table>\n</md-card>\n'},3526:function(t,e){t.exports='<div flex layout="column" layout-align="start center">\n    <h1 ma-tr="ui.app.agreeToLicense"></h1>\n    <div flex class="ma-license">\n\n<p>Thank you installing Mango Automation.  By default Mango runs in “Free Mode,” which entails a license for Personal, Evaluation and Educational use with a restriction to 300 Data Points and some feature restrictions.  Please read the details of the license below before continuing.  You can compare the different versions and license options for Mango here: <a href="http://infiniteautomation.com/pricing">http://infiniteautomation.com/pricing</a></p>\n<p>If needed, you can purchase an unrestricted license for commercial use after you log into your Mango on the Modules page.  Click the “Update license” button and you will be directed through the process.  See our support page for more information and assistance.  <a href="http://help.infiniteautomation.com">http://help.infiniteautomation.com</a></p>\n<h2>PERSONAL, EVALUATION AND EDUCATIONAL USE LICENSE AGREEMENT</h2>\n<p>This is an important legal agreement ("Agreement") between you and Infinite Automation Systems, Inc., a Colorado corporation ("IAS"). YOU MUST READ AND AGREE TO THE TERMS OF THIS AGREEMENT BEFORE ANY LICENSED PRODUCT CAN BE DOWNLOADED OR INSTALLED OR USED. BY CLICKING ON THE "ACCEPT" BUTTON OF THIS AGREEMENT, OR BY DOWNLOADING, INSTALLING OR USING A LICENSED PRODUCT, YOU ARE AGREEING TO BE BOUND BY THE TERMS AND CONDITIONS OF THIS AGREEMENT. IF YOU DO NOT AGREE WITH THE TERMS AND CONDITIONS OF THIS AGREEMENT, THEN YOU SHOULD EXIT THIS PAGE AND NOT DOWNLOAD OR INSTALL OR USE ANY LICENSED PRODUCT. BY DOING SO YOU FOREGO ANY IMPLIED OR STATED RIGHTS TO DOWNLOAD OR INSTALL OR USE A LICENSED PRODUCT AND YOU MAY RETURN IT TO THE PLACE YOU OBTAINED IT FOR A FULL REFUND (IF APPLICABLE).</p>\n<h3>1. Products and Services</h3>\n<p>1.1. This Agreement applies to Licensed Product(s), which means the Mango Automation software product(s) that Licensee has acquired.</p>\n<p>1.2. Additional terms and conditions (beyond those stated here and in any attached supplements) may apply to certain Licensed Products. When ordering these Licensed Products, you will be given an opportunity to review the additional terms and conditions that must be accepted for you to receive the Licensed Products. If the additional terms and conditions conflict in any way with the terms and conditions stated here, the additional terms and conditions will prevail.</p>\n<h3>2. Licenses</h3>\n<p>2.1. Your License Rights. Subject to the terms and conditions of this Agreement, IAS hereby grants to you a non-exclusive and non-transferable license during the Term to use the Licensed Product:</p>\n<p>a. solely in executable or object code form, on a single computer, and</p>\n<p>b. solely for your Personal Use and not for purchase, sale or delivery of any product or service to a third party or other commercial or business purpose.</p>\n<p>2.2. Limitations on your License Rights. You shall not, and shall not permit any third party to:</p>\n<p>a. duplicate the Licensed Product for any purpose other than as reasonably necessary to use the same as contemplated by this Agreement consistent at all times with your Personal Use of the Licensed Product;</p>\n<p>b. except for temporary transfer in the event of computer malfunction, install the Licensed Product on a second computer;</p>\n<p>c. except as expressly authorized by law, reverse engineer, disassemble, decompile, translate, reconstruct, transform or extract the Licensed Product or any portion of the Licensed Product (including without limitation any related malware signatures and malware detection routines);</p>\n<p>d. except as expressly authorized by law, change, modify or otherwise alter the Licensed Product (including without limitation any related malware signatures and malware detection routines);</p>\n<p>e. transfer, pledge, rent, sell, convey, share or sublicense the Licensed Product other than in connection with the sale or other transfer of the computer on which it is initially installed;</p>\n<p>f. grant any third party access to or use of the Licensed Product on a service bureau, timesharing, subscription service, rental or application service provider basis or otherwise; or</p>\n<p>g. defeat or circumvent, attempt to defeat or circumvent, or authorize or assist any third party in defeating or circumventing controls on the installation or use of copies of the Licensed Product.</p>\n<p>2.3. Open Source Software. The Licensed Product may be delivered with software that is subject to open source licensing terms ("Open Source Software") which are available at http://www.gnu.org/copyleft/gpl.html . Licensee agrees that all Open Source Software shall be and shall remain subject to the terms and conditions under which it is provided. The Open Source Software is provided "AS IS," WITHOUT ANY WARRANTY OF ANY KIND, AND IAS FURTHER DISCLAIMS ALL OTHER WARRANTIES, EXPRESS, IMPLIED OR STATUTORY, WITH RESPECT TO OPEN SOURCE SOFTWARE, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF NONINFRINGEMENT, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. NEITHER IAS NOR THE LICENSORS OF OPEN SOURCE SOFTWARE SHALL HAVE ANY LIABILITY FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING WITHOUT LIMITATION LOST PROFITS), HOWEVER CAUSED ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OR DISTRIBUTION OF THE LICENSED PRODUCT, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. Copyrights to the Open Source Software are held by the copyright holders indicated in the copyright notices in the corresponding source files.</p>\n<p>2.4. Conditions. Your right to use the Licensed Product is conditioned upon your compliance with the terms of this Agreement. When the License Term expires, your license rights also expire and you may no longer use the Licensed Product.</p>\n<p>2.5. Copies. If you make backup or archival copies of a Licensed Product or Documentation, you must reproduce all copyright, trademark, and other notices that appear on the original copy.</p>\n<p>2.6. Transfers and Assignments. You may not transfer or assign your license rights to any other person in any manner (by assignment, operation of law or otherwise) unless you have obtained written consent from IAS. If you attempt to transfer or assign any of your license rights without IAS\'s consent, the transfer or assignment will be ineffective, null, and void (and you will be in material breach of this Agreement).</p>\n<h3>3. Term and Termination.</h3>\n<p>This License is effective until terminated. you may terminate this License at any time by destroying all copies of the Licensed Product including any Documentation. This License will terminate immediately without notice from IAS if you fail to comply with any provision of this License. Upon termination, you must destroy all copies of the Licensed Product.</p>\n<h3>4. No Warranty.</h3>\n<p>All Licensed Products and Documentation are provided "AS IS". IAS disclaims all warranties (express, implied, or statutory), including any warranties of merchantability, fitness for a particular purpose, title, or non-infringement and any warranties arising from a course of dealing or usage of trade. IAS does not warrant that the operation of the Licensed Product will be uninterrupted or error free, or that the Licensed Product will provide 100% protection. Your reliance on the availability or accuracy of the Licensed Product shall be entirely at your own risk.</p>\n<h3>5. Other Terms.</h3>\n<p>5.1. Ownership of IP Rights. IAS and its licensors own all Intellectual Property Rights in the Licensed Products and Documentation. Your only rights in the Licensed Products and Documentation are the rights expressly granted in this Agreement; all other rights are reserved by IAS. IAS\'s licensors are third-party beneficiaries of, and thus may enforce against you, the license restrictions and confidentiality obligations in this Agreement with respect to their intellectual property and proprietary information. IAS may freely use and disseminate any Feedback you provide. You agree not to claim that IAS owes you any compensation for its use or dissemination of such Feedback.</p>\n<p>5.2. Limitation of Liability. For each Licensed Product you license or purchase from IAS under this Agreement, IAS\'s maximum total, cumulative liability to you is limited to One Hundred and no/100 United States Dollars (US$100) (regardless of the nature of the liability or the nature or number of claims giving rise to the liability). IAS will not, under any circumstances or any theory of liability, be liable to you or any third party for any lost profits, loss of data, loss of privacy or consequential, incidental, or special damages arising from this Agreement or the products and services provided to you under this Agreement, even if IAS has been advised of the possibility off such damages. The limitations of liability in this section are a fundamental part of this Agreement and are intended to apply even if an exclusive remedy is found to have failed of its essential purpose.</p>\n<p>5.3. Export Controls. You acknowledge that the Licensed Products, including technical data, are subject to U.S. export control laws, including the U.S. Export Administration Act and its associated regulations, and may be subject to export or import regulations in other countries. You agree to comply with all applicable U.S. and international laws governing export and re-export of the Licensed Products, including the U.S. Export Administration Regulations, as well as end-user, end-use and destination restrictions issued by the United States and other governments.</p>\n<p>5.4. Governing Law; Jurisdiction. This Agreement is governed by the laws of the United States and the State of Colorado, without regard to conflicts of laws principles. The federal and state courts located in Boulder County, Colorado have exclusive jurisdiction over any disputes arising from or relating to this Agreement, and each party consents to such jurisdiction and venue.</p>\n<p>5.5. Notices. Any notice, approval, consent, or other communication intended to have legal effect under this Agreement must be given to the other party in writing, must be sent by first-class, registered, or overnight mail or private overnight courier (to the address for the other party stated on the signature page, unless the other party has given notice of a new address), and will be deemed given upon receipt or when delivery is refused.</p>\n<p>5.6. Waivers. Either party\'s failure to enforce any provision of this Agreement will not be deemed a waiver of the future enforcement of that provision or enforcement of any other provision. In order to be binding, a waiver must be in writing and signed by the party giving the waiver.</p>\n<p>5.7. Independent Contractors. The parties to this Agreement are independent contractors. Neither party is the agent or partner of the other party, or has any power or authority to act on behalf of the other party.</p>\n<p>5.8. Severability. If any provision in this Agreement is found to be invalid or unenforceable as written, the remaining provisions will remain in full force and effect and the invalid or unenforceable provision is to be construed (and, if necessary, modified) so that it is valid and enforceable to the greatest extent possible.</p>\n<p>5.9. Attorneys\' Fees. The prevailing party in any action to enforce this Agreement will be entitled to recover costs and expenses including reasonable attorneys\' fees.</p>\n<p>5.10. Remedies. Except where this Agreement expressly provides exclusive remedies, all rights and remedies of either party (including termination rights) are cumulative. You agree that monetary damages alone would not be an adequate remedy, and therefore IAS will be entitled to injunctive relief if you materially breach the license restrictions or confidentiality provisions in this Agreement.</p>\n<p>5.11. Force Majeure. Each party will be excused from performance of its obligations under this Agreement, except payment obligations, to the extent that performance is rendered impossible by earthquake, fire, flood, governmental action, labor disruptions, supplier failures, or any other event or circumstance beyond that party\'s reasonable control.</p>\n<p>5.12. Construction. Section headings in this Agreement are for convenience only. The word "including" (and variations thereof) is not intended to be limiting. No rule of strict construction is to be used when interpreting this Agreement.</p>\n<p>5.13. Government Users. If you are a branch or agency of the United States Government, or are acquiring any Licensed Product on behalf of any branch or agency of the United States Government, then the following provision applies. The Licensed Products and Documentation are comprised of "commercial computer software" and "commercial computer software documentation", as such terms are used in 48 C.F.R. 12.212, and are provided to the Government (i) for acquisition by or on behalf of civilian agencies, consistent with the policy set forth in 48 C.F.R. 12.212; or (ii) for acquisition by or on behalf of units of the Department of Defense, consistent with the policies set forth in 48 C.F.R. 227.7202-1 and 227.7202-3.</p>\n<p>5.14. Entire Agreement. This Agreement constitutes the entire agreement between the parties concerning its subject matter, and supersedes any prior or contemporaneous agreements, communications, or understandings (whether written or oral).</p>\n<p>5.15. Amendments. This Agreement may be amended only by means of a written instrument signed by authorized representatives of both parties that specifically refers to this Agreement and states the parties\' intention to amend it.</p>\n<h3>6. Glossary of Definitions</h3>\n<p>6.1. Documentation means any user manuals, reference manuals, release, application and methodology notes, written utility programs, and other materials in any form provided by IAS for use with a Licensed Product.</p>\n<p>6.2. Error means a defect in a Licensed Product that causes it to deviate substantially from the specifications in the corresponding Documentation.</p>\n<p>6.3. Feedback means any ideas or suggestions you voluntarily provide to IAS (in any manner, whether in writing or orally or otherwise) regarding the Licensed Products or Documentation, including possible enhancements or improvements.</p>\n<p>6.4. Intellectual Property Rights means all patent rights, copyrights, trade secret rights, mask works, and trademark rights (including service marks and trade names), and any applications for these rights, in all countries.</p>\n<p>6.5. License Term means the period of time during which you may use a Licensed Product under a particular license.</p>\n<p>6.6. Licensed Product(s) has the meaning given in section 1.</p>\n<p>6.7. Open Source Software has the meaning given in section 2.3.</p>\n<p>6.8. Personal Use means use of a Licensed Product for: (a) personal use; (b) evaluation of a Licensed Product for the sole purpose of determining whether or not to purchase such Licensed Product; or (c) academic or other scholarly research. Personal Use shall not mean a use of a Licensed Product that: (i) is undertaken for profit, (ii) is intended to produce works, services, or data for commercial use, or (iii) is conducted or funded by a person or an entity engaged in the commercial use, application or exploitation of works similar to the Licensed Product.</p>\n<p>6.9. You (and variations thereof) means the entity that agrees to the terms and conditions of this Agreement as the licensee.</p>\n\n\n    </div>\n    <md-button ui-sref="ui.settings.home({helpOpen: true})" class="md-raised md-accent" ma-tr="ui.app.agreeAndContinue"></md-button>\n</div>'},3527:function(t,e){t.exports='<div layout="row" flex>\n  <md-sidenav class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left" hide-print\n        md-is-locked-open="navLockedOpen" md-swipe-left="closeMenu()" class="navigation-menu">\n    <md-toolbar class="md-tall md-primary md-hue-1 ma-ui-sidebar-header md-whiteframe-glow-z1">\n      <ma-now update-interval="1 MINUTES" output="currentTime"></ma-now>\n      <div flex layout="row">\n        <img ng-src="{{uiSettings.logoSrc}}" ng-attr-title="{{::serverInfo.instanceDescription}}" ng-attr-alt="{{::serverInfo.instanceDescription}}">\n        <div flex layout="column" layout-align="start end" class="ma-ui-user-datetime">\n          <span ng-bind="currentTime.format(\'LT\')" class="ma-ui-user-time"></span>\n          <span ng-bind="currentTime.format(\'ddd ll\')" class="ma-ui-user-date"></span>\n          <span ng-bind="currentTime.format(\'z\')" class="ma-ui-user-date"></span>\n        </div>\n      </div>\n      <div layout>\n        <md-menu flex md-offset="0 48">\n          <div layout="row" layout-align="start center" ng-click="$mdMenu.open($event)">\n            <div flex layout="column">\n              <span><span ng-bind="User.current.username"></span> <em ng-if="User.current.name" ng-bind="\'(\' + User.current.name + \')\'"></em></span>\n              <span class="email" ng-bind="serverInfo.instanceDescription"></span>\n            </div>\n            <md-icon>arrow_drop_down</md-icon>\n          </div>\n          \n          <md-menu-content width="4" class="user-menu">\n            <md-menu-item>\n              <md-button aria-label="{{\'ui.app.userProfile\'|maTr}}" ui-sref="ui.settings.users({username: User.current.username})">\n                <md-icon md-menu-align-target>person</md-icon>\n                <span ma-tr="ui.app.userProfile"></span>\n              </md-button>\n            </md-menu-item>\n            <md-menu-item>\n              <md-button aria-label="{{\'header.logout\'|maTr}}" ui-sref="logout">\n                <md-icon md-menu-align-target>power_settings_new</md-icon>\n                <span ma-tr="header.logout"></span>\n              </md-button>\n            </md-menu-item>\n          </md-menu-content>\n        </md-menu>\n      </div>\n    </md-toolbar>\n\n    <md-content flex role="navigation">\n      <ma-ui-json-store-menu user="User.current"></ma-ui-json-store-menu>\n    </md-content>\n  </md-sidenav>\n\n  <div layout="column" tabIndex="-1" flex class="main-page-area">\n    <md-toolbar class="ma-ui-main-toolbar" ng-class="{\'md-whiteframe-glow-z1\': !(stateParams.dateBar && dateBar.expanded)}" role="toolbar">\n\n      <div class="md-toolbar-tools ma-ui-toolbar-tools" tabIndex="-1">\n        <md-button flex="none" id="menu-button" class="md-icon-button" ng-click="toggleMenu()" aria-label="Toggle Menu"> <md-icon class="md-light">menu</md-icon>\n        </md-button>\n        <div layout="row" flex class="fill-height">\n          <h2 flex="initial" class="md-toolbar-item ma-ui-breadcrumb hide-xs">\n            <span ng-repeat="crumb in crumbs track by $index" ng-class="{\'hide-sm\': !$last}">\n                <span ma-tr="{{crumb.maTr}}" ng-bind="crumb.text"></span>\n                <span ng-if="!$last">\n                    <md-icon>chevron_right</md-icon>\n                </span>\n            </span>\n          </h2>\n          \n          <span flex></span>\n          \x3c!-- use up the empty space --\x3e\n\n          <div flex="none" class="md-toolbar-item ma-ui-tools" layout="row" layout-align="start center">\n            <ma-event-audio ng-if="User.current && !User.current.muted" audio-files="uiSettings.eventAudioFiles" read-aloud="uiSettings.eventReadAloud"></ma-event-audio>\n            <ma-ui-active-event-icons style="padding-right: 8px;" ng-if="$mdMedia(\'gt-xs\')"></ma-ui-active-event-icons>\n\n            <div ng-if="stateParams.dateBar">\n              <md-input-container class="date-preset">\n                <ma-date-range-picker from="dateBar.from" to="dateBar.to" no-underline="true"\n                  preset="{{dateBar.preset}}" update-interval="{{dateBar.updateIntervalString}}"\n                  refresh="dateBar.refresh" on-change="dateBar.preset = preset"></ma-date-range-picker>\n              </md-input-container>\n              <md-button class="md-icon-button md-hue-2" ng-click="dateBar.expanded = !dateBar.expanded"\n                aria-label="{{\'ui.app.moreDateSettings\' | maTr}}"\n                ng-class="{\'md-accent\': dateBar.expanded}">\n                  <md-icon>date_range</md-icon>\n                  <md-tooltip md-autohide><span ma-tr="ui.app.expandDateBar"></span></md-tooltip>\n              </md-button>\n            </div>\n            \n            <md-button class="md-icon-button" ng-if="$state.params.helpPage" ui-state="$state.params.helpPage">\n                <md-icon>help</md-icon>\n                <md-tooltip md-autohide>\n                    <span ma-tr="ui.app.viewHelpPage"></span>\n                </md-tooltip>\n            </md-button>\n          </div>\n        </div>\n      </div>\n\n    </md-toolbar>\n    \n    <ma-ui-date-bar on-refresh="dateBar.refresh = $event" ng-if="stateParams.dateBar" ng-show="dateBar.expanded" class="ng-hide"></ma-ui-date-bar>\n    \n    <ma-ui-upgrades-banner ng-if="User.current.admin"></ma-ui-upgrades-banner>\n\n    <md-content layout="column" flex class="main-content">\n      <div flex="noshrink" ui-view layout="column" class="ma-ui-main-view" ng-class="{\'ma-no-padding\': $state.params.noPadding}" role="main"></div>\n      <ma-ui-footer flex="none" aria-role="contentinfo" layout ng-if="!$state.params.hideFooter"></ma-ui-footer>\n    </md-content>\n  </div>\n  \n  <md-sidenav class="ma-help-sidebar md-sidenav-right md-whiteframe-z2" md-component-id="right" hide-print md-is-locked-open="$mdMedia(\'gt-md\') && pageOpts.helpUrl" md-is-open="pageOpts.helpUrl" md-swipe-right="closeHelp()">\n    <md-content class="md-padding">\n        <md-button class="md-icon-button" md-no-ink ng-click="pageOpts.helpUrl = null">\n            <md-icon>close</md-icon>\n            <md-tooltip md-autohide>\n                <span ma-tr="ui.app.closeHelpPage"></span>\n            </md-tooltip>\n        </md-button>\n        <div ng-include="pageOpts.helpUrl" onload="scrollHelp()"></div>\n    </md-content>\n  </md-sidenav>\n</div>'},3528:function(t,e){t.exports='<h1 ma-tr="ui.app.pageNotFound"></h1>\n\n<ma-state-params state-params="stateParams"></ma-state-params>\n<p ma-tr="ui.app.pathNotFound" ma-tr-args="[stateParams.path]"></p>\n'},3529:function(t,e){t.exports='<h1 ma-tr="ui.app.unauthorized"></h1>\n\n<p ma-tr="ui.app.unauthorizedPath"></p>'},3530:function(t,e){t.exports='<h1 ma-tr="ui.app.error"></h1>\n\n<ma-state-params state-params="stateParams"></ma-state-params>\n\n<p ng-if="!stateParams.toState" ma-tr="ui.app.clientErrorOccurred"></p>\n<p ng-if="stateParams.toState" ma-tr="ui.app.clientErrorOccurredTransitioning" ma-tr-args="[stateParams.toState.url]"></p>\n\n<pre ng-if="stackTrace" ng-bind="stackTrace"></pre>\n'},3531:function(t,e){t.exports='<h1 ma-tr="ui.app.serverError"></h1>\n\n<p ma-tr="ui.app.serverErrorOccurred"></p>'},3532:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(94),r=n.n(o),s=n(3361),l=n.n(s),m=n(3362),d=n.n(m),c=n(3363),u=n.n(c),p=n(3364),h=n.n(p);n(3365);const g="—";class f{static get $$ngIsClass(){return!0}static get $inject(){return["$mdMedia","localStorageService","$state","maUiDateBar","$mdDialog","maStatistics","$scope","$mdColorPicker","$timeout"]}constructor(t,e,n,a,i,o,r,s,l){this.$mdMedia=t,this.localStorageService=e,this.$state=n,this.dateBar=a,this.$mdDialog=i,this.maStatistics=o,this.$scope=r,this.$mdColorPicker=s,this.$timeout=l,this.selected=[],this.selectedStats=[],this.watchListParams={},this.selectFirstWatchList=!1,this.numberOfRows=t("gt-sm")?100:25,this.pageNumber=1,this.sortOrder="name",this.downloadStatus={},this.chartOptions={selectedAxis:"left",axes:{}},this.axisOptions=[{name:"left",translation:"ui.app.left"},{name:"right",translation:"ui.app.right"},{name:"left-2",translation:"ui.app.farLeft"},{name:"right-2",translation:"ui.app.farRight"}],this.columns=[{name:"xid",label:"ui.app.xidShort"},{name:"dataSourceName",label:"ui.app.dataSource"},{name:"deviceName",label:"common.deviceName",selectedByDefault:!0},{name:"name",label:"common.name",selectedByDefault:!0},{name:"value",label:"ui.app.value",selectedByDefault:!0},{name:"time",label:"ui.app.time",selectedByDefault:!0},{name:"enabled",label:"common.enabled"},{name:"dataType",label:"dsEdit.pointDataType"},{name:"readPermission",label:"pointEdit.props.permission.read"},{name:"setPermission",label:"pointEdit.props.permission.set"},{name:"unit",label:"pointEdit.props.unit"},{name:"chartColour",label:"pointEdit.props.chartColour"},{name:"plotType",label:"pointEdit.plotType"},{name:"rollup",label:"common.rollup"},{name:"templateXid",label:"ui.app.templateXid"},{name:"integralUnit",label:"pointEdit.props.integralUnit"},{name:"pointFolderId",label:"ui.app.hierarchyFolderId"}],this.columns.forEach((t,e)=>t.order=e),this.loadLocalStorageSettings(),this.selectedPointsChangedBound=((...t)=>this.selectedPointsChanged(...t)),this.sortOrPageChangedBound=((...t)=>this.sortOrPageChanged(...t))}$onInit(){const t=this.localStorageService.get("watchListPage")||{},e=this.$state.params;if(e.watchListXid||!(e.dataSourceXid||e.deviceName||e.hierarchyFolderId||e.tags)&&t.watchListXid){const n=e.watchListXid||t.watchListXid;this.pointBrowserLoadItem={watchListXid:n}}else if(e.dataSourceXid||!(e.deviceName||e.hierarchyFolderId||e.tags)&&t.dataSourceXid){const n=e.dataSourceXid||t.dataSourceXid;this.pointBrowserLoadItem={dataSourceXid:n}}else if(e.deviceName||!e.hierarchyFolderId&&!e.tags&&t.deviceName){const n=e.deviceName||t.deviceName;this.pointBrowserLoadItem={deviceName:n}}else if(e.hierarchyFolderId||!e.tags&&t.hierarchyFolderId){const n=e.hierarchyFolderId||t.hierarchyFolderId;this.pointBrowserLoadItem={hierarchyFolderId:n}}else e.tags||t.tags?e.tags?this.pointBrowserLoadItem={tags:this.parseTagsParam(e.tags)}:this.pointBrowserLoadItem={tags:t.tags}:this.$mdMedia("gt-md")&&(this.pointBrowserLoadItem={firstWatchList:!0});this.dateBar.subscribe((t,e)=>{this.updateStats()},this.$scope)}loadLocalStorageSettings(){const t=this.localStorageService.get("watchListPage")||{};this.selectedTags=t.selectedTags||[],Array.isArray(t.selectedColumns)?this.selectedColumns=t.selectedColumns.map(t=>this.columns.find(e=>e.name===t)).filter(t=>!!t):this.selectedColumns=this.columns.filter(t=>t.selectedByDefault),this.numberOfRows=t.numberOfRows||(this.$mdMedia("gt-sm")?100:25),this.sortOrder=null!=t.sortOrder?t.sortOrder:"name"}saveLocalStorageSettings(){if(this.watchList&&this.watchList.isNew){const t=this.localStorageService.get("watchListPage")||{};t.selectedTags=this.selectedTags,t.selectedColumns=this.selectedColumns.map(t=>t.name),t.numberOfRows=this.numberOfRows,t.sortOrder=this.sortOrder,this.localStorageService.set("watchListPage",t)}}watchListSettingChanged(){this.copyLocalSettingsToWatchList(),this.saveLocalStorageSettings()}copyLocalSettingsToWatchList(){this.watchList.data.selectedTags=this.selectedTags,this.watchList.data.selectedColumns=this.selectedColumns.map(t=>t.name),this.watchList.data.sortOrder=this.sortOrder,this.watchList.data.numberOfRows=this.numberOfRows}parseTagsParam(t){const e={};return(Array.isArray(t)?t:[t]).forEach(t=>{const n=t.split(":");if(2===n.length){const t=n[0],a=n[1].split(",");e[t]||(e[t]=[]),e[t].push(...a)}}),e}formatTagsParam(t){const e=[];return Object.keys(t).forEach(n=>{const a=t[n],i=(Array.isArray(a)?a:[a]).join(",");e.push(`${n}:${i}`)}),e}updateState(t){const e=this.localStorageService.get("watchListPage")||{};["watchListXid","dataSourceXid","deviceName","hierarchyFolderId","tags"].forEach(n=>{const a=t[n];a?(e[n]=a,this.$state.params[n]=a):(delete e[n],this.$state.params[n]=null)}),t.tags&&(this.$state.params.tags=this.formatTagsParam(t.tags)),this.localStorageService.set("watchListPage",e),this.$state.go(".",this.$state.params,{location:"replace",notify:!1})}clearWatchList(){this.watchList=null,this.clearSelected()}clearSelected(){this.selected=[],this.selectedStats=[],this.chartConfig.selectedPoints=[]}rebuildChart(){this.chartWatchList=Object.assign(Object.create(this.watchList.constructor.prototype),this.watchList)}watchListChanged(){this.selected=[],this.selectedStats=[],this.watchList.updatePointConfigs(),this.chartConfig=this.watchList.data.chartConfig,this.watchList.defaultParamValues(this.watchListParams),this.loadLocalStorageSettings(),Array.isArray(this.watchList.data.selectedColumns)&&(this.selectedColumns=this.watchList.data.selectedColumns.map(t=>this.columns.find(e=>e.name===t)).filter(t=>!!t)),Array.isArray(this.watchList.data.selectedTags)&&(this.selectedTags=this.watchList.data.selectedTags),null!=this.watchList.data.sortOrder&&(this.sortOrder=this.watchList.data.sortOrder),Number.isFinite(this.watchList.data.numberOfRows)&&this.watchList.data.numberOfRows>=0&&(this.numberOfRows=this.watchList.data.numberOfRows),this.copyLocalSettingsToWatchList(),this.getPoints();const t={};this.watchList.isNew?"query"===this.watchList.type&&this.watchList.deviceName?t.deviceName=this.watchList.deviceName:"query"===this.watchList.type&&this.watchList.dataSource?t.dataSourceXid=this.watchList.dataSource.xid:"hierarchy"===this.watchList.type&&Array.isArray(this.watchList.hierarchyFolders)&&this.watchList.hierarchyFolders.length?t.hierarchyFolderId=this.watchList.hierarchyFolders[0].id:"tags"===this.watchList.type&&this.watchList.tags&&(t.tags=this.watchList.tags):t.watchListXid=this.watchList.xid,this.updateState(t),this.rebuildChart()}getPoints(){this.wlPointsPromise&&this.wlPointsPromise.cancel(),this.points=[],this.wlPointsPromise=this.watchList.getPoints(this.watchListParams),this.pointsPromise=this.wlPointsPromise.then(null,i.a.noop).then(t=>{this.points=t||[];const e=this.pointNameCounts={};this.points.forEach(t=>{const n=e[t.name];e[t.name]=(n||0)+1,t.tags||(t.tags={}),t.tags.name=t.name,t.tags.device=t.deviceName}),this.filterPoints(),this.selected=this.watchList.findSelectedPoints(this.points),this.updateStats()})}sortOrPageChanged(){this.watchListSettingChanged(),this.filterPoints()}filterPoints(){const t=this.numberOfRows,e=(this.pageNumber-1)*t,n=this.sortOrder,a=this.points.slice();if(n){let t=n,e=!1;(e=0===t.indexOf("-")||0===t.indexOf("+"))&&(t=t.substring(1));let i=!1;0===t.indexOf("tags.")&&(i=!0,t=t.substring(5)),a.sort((n,a)=>{const o=i?n.tags[t]:n[t],r=i?a.tags[t]:a[t];return o===r||Number.isNaN(o)&&Number.isNaN(r)?0:null==o||Number.isNaN(o)||o>r?e?-1:1:null==r||Number.isNaN(r)||o<r?e?1:-1:0})}this.filteredPoints=a.slice(e,e+t)}editWatchList(t){this.$state.go("ui.settings.watchListBuilder",{watchListXid:t?t.xid:null})}saveSettings(){this.watchList.data.paramValues=i.a.copy(this.watchListParams),this.watchList.isNew?this.$state.go("ui.settings.watchListBuilder",{watchList:this.watchList}):this.watchList.$update().then(t=>{this.chartConfig=t.data.chartConfig,this.rebuildChart()})}selectedPointsChanged(t){const e=!this.selected.includes(t),n=this.watchList.nonStaticTags(this.points),a=this.watchList.pointConfigs();if(e){const e=[t],n=t.watchListConfig;delete t.watchListConfig;const i=a.indexOf(n);i>=0&&a.splice(i,1),this.selected=this.selected.filter(t=>{if(t.watchListConfig!==n)return!0;e.push(t),delete t.watchListConfig}),this.removeStatsForPoints(e)}else a.push(this.newPointConfig(t,n)),this.updateStats(t);this.rebuildChartDebounced()}rebuildChartDebounced(){this.rebuildChartPromise&&(this.$timeout.cancel(this.rebuildChartPromise),delete this.rebuildChartPromise),this.rebuildChartPromise=this.$timeout(()=>{delete this.rebuildChartPromise,this.$scope.$applyAsync(()=>{this.rebuildChart()})},1e3,!1)}newPointConfig(t,e){const n={};return t.watchListConfig=n,this.chartOptions.configNextPoint&&(this.chartOptions.pointColor&&(n.lineColor=this.chartOptions.pointColor),this.chartOptions.pointChartType&&(n.type=this.chartOptions.pointChartType),this.chartOptions.pointAxis&&(n.valueAxis=this.chartOptions.pointAxis)),n.xid=t.xid,n.tags={},e.forEach(e=>n.tags[e]=t.tags[e]),n}removeStatsForPoints(t){t.forEach(t=>{const e=this.selectedStats.findIndex(e=>e.xid===t.xid);e>=0&&this.selectedStats.splice(e,1)})}updateStats(t){if(!this.selected)return;let e;t?e=[t]:(this.selectedStats=[],e=this.selected),e.forEach(t=>{const e={name:t.name,device:t.deviceName,xid:t.xid};this.selectedTags.forEach(n=>{e[`tags.${n}`]=t.tags[n]}),this.selectedStats.push(e),this.maStatistics.getStatisticsForXid(t.xid,{from:this.dateBar.from,to:this.dateBar.to,rendered:!0}).then(t=>{e.average=t.average?t.average.value:g,e.minimum=t.minimum?t.minimum.value:g,e.maximum=t.maximum?t.maximum.value:g,e.sum=t.sum?t.sum.value:g,e.first=t.first?t.first.value:g,e.last=t.last?t.last.value:g,e.count=t.count,e.averageValue=parseFloat(t.average&&t.average.value),e.minimumValue=parseFloat(t.minimum&&t.minimum.value),e.maximumValue=parseFloat(t.maximum&&t.maximum.value),e.sumValue=parseFloat(t.sum&&t.sum.value),e.firstValue=parseFloat(t.first&&t.first.value),e.lastValue=parseFloat(t.last&&t.last.value)})});let n={};this.selectedStats.forEach(t=>{if(n[t.xid])throw new Error;n[t.xid]=!0})}columnIsSelected(t){return!!this.selectedColumns.find(e=>e.name===t)}chooseAxisColor(t,e){this.chartConfig.valueAxes||(this.chartConfig.valueAxes={}),this.chartConfig.valueAxes[e]||(this.chartConfig.valueAxes[e]={}),this.showColorPicker(t,this.chartConfig.valueAxes[e],"color",!0)}showColorPicker(t,e,n,a){e&&this.$mdColorPicker.show({value:e[n]||r.a.random().toHexString(),defaultValue:"",random:!1,clickOutsideToClose:!0,hasBackdrop:!0,skipHide:!1,preserveScope:!1,mdColorAlphaChannel:!0,mdColorSpectrum:!0,mdColorSliders:!1,mdColorGenericPalette:!0,mdColorMaterialPalette:!1,mdColorHistory:!1,mdColorDefaultTab:0,$event:t}).then(t=>{e[n]=t,a&&this.rebuildChart()})}showDownloadDialog(t){this.$mdDialog.show({controller:["maUiDateBar","maPointValues","maUtil","MA_ROLLUP_TYPES","MA_DATE_TIME_FORMATS","maUser","$mdDialog","localStorageService",function(t,e,n,a,i,o,r,s){this.dateBar=t,this.rollupTypes=a,this.rollupType="NONE",this.timeFormats=i,this.timezones=[{translation:"ui.app.timezone.user",value:o.current.getTimezone(),id:"user"},{translation:"ui.app.timezone.server",value:o.current.systemTimezone,id:"server"},{translation:"ui.app.timezone.utc",value:"UTC",id:"utc"}],this.loadSettings=function(){const t=s.get("watchlistDownload")||{};this.allPoints=null!=t.allPoints?t.allPoints:!this.selected.length,this.rollupType=t.rollupType||"NONE",this.timeFormat=t.timeFormat||this.timeFormats[0].format,this.timezone=t.timezone&&this.timezones.find(e=>e.id===t.timezone)||this.timezones[0],this.customTimeFormat=!this.timeFormats.find(t=>t.format===this.timeFormat)},this.loadSettings(),this.saveSettings=function(){s.set("watchlistDownload",{allPoints:this.allPoints,rollupType:this.rollupType,timeFormat:this.timeFormat,timezone:this.timezone.id})},this.customTimeFormatChanged=function(){this.customTimeFormat||this.timeFormats.find(t=>t.format===this.timeFormat)||(this.timeFormat=this.timeFormats[0].format)},this.downloadData=function(a){const i=(this.allPoints?this.points:this.selected).map(t=>t.xid),o=a.indexOf("COMBINED")>0?"getPointValuesForXidsCombined":"getPointValuesForXids",r=0===a.indexOf("CSV")?"text/csv":"application/json",s=0===a.indexOf("CSV")?"csv":"json",l=this.watchList.name+"_"+t.from.toISOString()+"_"+t.to.toISOString()+"."+s;let m;m="CSV_COMBINED"===a?["TIMESTAMP","VALUE"]:["XID","DATA_SOURCE_NAME","DEVICE_NAME","NAME","TIMESTAMP","VALUE","RENDERED"],this.downloadStatus.error=null,this.downloadStatus.downloading=!0,this.downloadStatus.queryPromise=e[o](i,{mimeType:r,responseType:"blob",from:t.from,to:t.to,rollup:this.rollupType,rollupInterval:t.rollupIntervals,rollupIntervalType:t.rollupIntervalPeriod,limit:-1,timeout:0,dateTimeFormat:this.timeFormat,timezone:this.timezone.value,fields:m}).then(t=>{this.downloadStatus.downloading=!1,n.downloadBlob(t,l)},t=>{this.downloadStatus.error=t.mangoStatusText,this.downloadStatus.downloading=!1})},this.cancelDownload=function(){this.downloadStatus.queryPromise.cancel()},this.cancel=function(){r.cancel()}}],template:l.a,parent:i.a.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:this.$mdMedia("xs")||this.$mdMedia("sm"),bindToController:!0,controllerAs:"$ctrl",locals:{watchList:this.watchList,selected:this.selected,downloadStatus:this.downloadStatus,points:this.points}})}}function v(t){return t.put("watchList.chartAndStats.html",u.a),t.put("watchList.table.html",h.a),{restrict:"E",template:d.a,scope:{},controller:f,controllerAs:"$ctrl",bindToController:{watchList:"<?"}}}v.$inject=["$templateCache"],e.default=v},3533:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(3367),r=n.n(o);function s(t,e,n,a,o,r,s,l){this.dateBar=s,this.User=l,this.chartType="smoothedLine",this.$onInit=function(){if(n.pointXid)this.pointXid=n.pointXid;else if(n.pointId)this.pointId=n.pointId;else{const t=o.get("lastDataPointDetailsItem");t&&(this.pointXid=t.xid)}this.retrievePreferences()},this.pointChanged=function(e){if(!e)return;delete t.pointValues,delete t.realtimePointValues,t.myPoint=e;const n=e.xid;a.go(".",{pointXid:n},{location:"replace",notify:!1}),o.set("lastDataPointDetailsItem",{xid:n}),r.pathByXid({xid:n}).$promise.then(function(t){this.path=t}.bind(this));const i=t.myPoint.pointLocator.dataType;this.dateBar.rollupTypesFilter="NUMERIC"===i?{}:{nonNumeric:!0},this.chartType=t.myPoint.amChartsGraphType()},this.updatePreferences=function(){const t=o.get("uiPreferences")||{};t.numberOfPointValues=this.numValues,t.realtimeMode=this.realtimeMode,t.showCachedData=this.showCachedData,o.set("uiPreferences",t)},this.retrievePreferences=function(){const t=i.a.merge({numberOfPointValues:100,realtimeMode:!0,showCachedData:!1},o.get("uiPreferences"));this.numValues=t.numberOfPointValues,this.realtimeMode=t.realtimeMode,this.showCachedData=t.showCachedData}}s.$inject=["$scope","$element","$stateParams","$state","localStorageService","maPointHierarchy","maUiDateBar","maUser"],e.default={controller:s,template:r.a}},3534:function(t,e,n){"use strict";n.r(e);var a=n(3368),i=n.n(a);const o=["eventType","alarmLevel","activeStatus","acknowledged","dateFilter"];function r(t,e,n,a){this.$mdMedia=t,this.dateBar=a,this.sort="-activeTimestamp",this.params=e.params,this.$onInit=function(){const t=this.params;o.forEach(e=>{const a="lastEvent-"+e,i=t[e],o=null!=i?i:n.get(a),r=this.normalizeFilter(o,"dateFilter"!==e&&"any");t[e]=r,n.set(a,r)}),e.go(".",t,{location:"replace",notify:!1})},this.normalizeFilter=function(t,e){if("string"==typeof t){const e=t.trim().toLowerCase();if("true"===e)return!0;if("false"===e)return!1}return"*"===t?"any":null==t?e:t},this.storeState=function(t){const a=this.params[t],i="lastEvent-"+t;e.go(".",this.params,{location:"replace",notify:!1}),n.set(i,a)}}r.$inject=["$mdMedia","$state","localStorageService","maUiDateBar"],e.default={controller:r,template:i.a}},3635:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(3346),r=n.n(o);function s(t,e,n,a,o,s){return new class{getMenuItemForPageXid(e){return t.getMenu().then(t=>{let n=null;return t.some(t=>{if(t.linkToPage&&t.pageXid===e)return n=t,!0}),n})}editMenuItemForPageXid(e,n,a){return this.getMenuItemForPageXid(n).then(o=>(o||(o={isNew:!0,pageXid:n,linkToPage:!0,permission:"user",name:"",url:"",params:{dateBar:{rollupControls:!0}}},a&&i.a.merge(o,a)),o.parent||(t.menuHierarchy.children.some(t=>{if("ui"===t.name)return o.parent=t}),o.parent||(o.parent=t.menuHierarchy)),o.disableTemplateControls=!0,this.editMenuItem(e,t.menuHierarchy,o).then(e=>e.deleted?t.removeMenuItem(o.name).then(()=>null):t.saveMenuItem(e,!o.isNew&&o.name).then(()=>e))))}editMenuItem(n,o,l){const m=[],d={};t.forEach(o.children,t=>{m.push(t),d[t.name]=!0});const c=i.a.copy(l);if(c.parent=l.parent,c.name){const t=c.name.trim().split(".");c.shortStateName=t[t.length-1]}else c.shortStateName="";return c.menuHidden||(c.showOnMenu=!0),c.dateBarOptions||(c.params&&c.params.dateBar?c.dateBarOptions=c.params.dateBar.rollupControls?"dateAndRollup":"date":c.dateBarOptions="none"),c.linkToPage?c.templateType="linkToPage":c.templateUrl?c.templateType="templateUrl":c.href?c.templateType="href":c.template?c.templateType="template":c.templateType="none",c.target||(c.target="_blank"),e.show({template:r.a,parent:i.a.element(document.body),targetEvent:n,clickOutsideToClose:!0,fullscreen:!0,bindToController:!0,controllerAs:"$ctrl",locals:{item:c,allMenuItems:m,root:o},controller:["$mdDialog",function(t){const e={};this.stateNameChanged=(()=>{this.calculateStateName(),this.menuItemEditForm.stateName.$setValidity("stateExists",this.item.name===l.name||!d[this.item.name])}),this.urlChanged=(()=>{this.menuItemEditForm.url.$setValidity("urlExists",this.item.url===l.url||!e[this.item.url])}),this.cancel=function(){t.cancel()},this.save=function(){this.calculateStateName(),this.menuItemEditForm.stateName.$setValidity("stateExists",this.item.name===l.name||!d[this.item.name]),this.menuItemEditForm.url&&this.menuItemEditForm.url.$setValidity("urlExists",this.item.url===l.url||!e[this.item.url]),this.menuItemEditForm.$setSubmitted(),this.menuItemEditForm.$valid&&t.hide()},this.deleteItem=(()=>{this.item.deleted=!0,t.hide()}),this.parentChanged=(()=>{this.calculateStateName()}),this.calculateStateName=(()=>{this.item.parent.name?this.item.name=this.item.parent.name+"."+this.item.shortStateName:this.item.name=this.item.shortStateName}),this.menuTextChanged=(()=>{if(this.item.menuText&&this.item.isNew&&(this.menuItemEditForm&&this.menuItemEditForm.url&&!this.menuItemEditForm.url.$pristine||(this.item.url="/"+s.snakeCase(s.titleCase(this.item.menuText).replace(/\s/g,""))),!this.menuItemEditForm||!this.menuItemEditForm.stateName||this.menuItemEditForm.stateName.$pristine)){let t=s.titleCase(this.item.menuText).replace(/\s/g,"");t&&(t=t.charAt(0).toLowerCase()+t.substr(1),this.item.shortStateName=s.camelCase(t),this.calculateStateName())}}),this.item.parent.children.forEach(t=>{e[t.url]=!0}),this.menuItems=this.allMenuItems.filter(t=>t.abstract&&t.name!==this.item.name),a.getPages().then(t=>{this.pages=t.jsonData.pages}),this.calculateStateName(),this.menuTextChanged()}]}).then(()=>{switch(delete c.isNew,delete c.shortStateName,delete c.disableTemplateControls,c.menuHidden=!c.showOnMenu,delete c.showOnMenu,c.dateBarOptions){case"date":c.params||(c.params={}),c.params.dateBar={};break;case"dateAndRollup":c.params||(c.params={}),c.params.dateBar={rollupControls:!0};break;default:c.params&&delete c.params.dateBar}switch(delete c.dateBarOptions,c.templateType){case"none":delete c.templateUrl,delete c.template,delete c.linkToPage,delete c.pageXid,delete c.href,delete c.target;break;case"linkToPage":delete c.templateUrl,delete c.template,delete c.href,delete c.target,c.linkToPage=!0;break;case"templateUrl":delete c.template,delete c.linkToPage,delete c.pageXid,delete c.href,delete c.target;break;case"href":delete c.templateUrl,delete c.template,delete c.linkToPage,delete c.pageXid,delete c.url}return delete c.templateType,null==c.weight&&(c.weight=1e3),null==c.permission&&(c.permission=""),c})}}}s.$inject=["maUiMenu","$mdDialog","maTranslate","maUiPages","$q","maUtil"];var l=s;function m(t,e){this.$onInit=function(){this.retrieveMenu(),t.$on("maUIMenuChanged",function(t,e){this.createMenuItemArray(e)}.bind(this))},this.retrieveMenu=function(){e.getMenuHierarchy().then(function(t){this.createMenuItemArray(t)}.bind(this))},this.createMenuItemArray=function(t){const e=t.children.slice();e.some(function(t,e,n){if("ui"===t.name)return n.splice(e,1),Array.prototype.push.apply(n,t.children),!0}),this.menuItems=e}}m.$inject=["$scope","maUiMenu"];var d={controller:m,template:'<ma-ui-menu menu-items="$ctrl.menuItems" user="$ctrl.user"></ma-ui-menu>',bindings:{user:"<user"}},c=n(3347),u=n.n(c);function p(){this.childVisible=function(t){let e=0;for(let n=0;n<t.length;n++){const a=t[n],i=this.visibleMap[a.name]={};a.children&&a.abstract?(i.visibleChildren=this.childVisible(a.children),i.visible=!a.menuHidden&&!!i.visibleChildren&&this.user.hasPermission(a.permission)):i.visible=!a.menuHidden&&this.user.hasPermission(a.permission),i.visible&&e++}return e},this.$onChanges=function(t){this.user&&this.origMenuItems&&this.copyMenu()},this.copyMenu=function(){const t=this.origMenuItems;this.visibleMap={},this.childVisible(t),this.menuItems=t},this.isVisible=function(t){return this.visibleMap[t.name].visible},this.menuOpened=function(t){let e=null,n=t;for(;n;){if(n.item.submenu){e=n.item;break}n=n.parentToggle}this.openSubmenu=e,this.openMenu=t.item,this.openMenuLevel=t.menuLevel+1},this.menuClosed=function(t){this.openSubmenu&&t.item.name===this.openSubmenu.name&&delete this.openSubmenu,this.openMenu&&0===this.openMenu.name.indexOf(t.item.name)&&(this.openMenu=t.parentToggle?t.parentToggle.item:null,this.openMenuLevel=t.menuLevel)}}p.$inject=[];var h={controller:p,template:u.a,bindings:{origMenuItems:"<menuItems",user:"<user"}},g=n(3348),f=n.n(g);function v(t,e){this.$onInit=function(){this.menuLevel=this.parentToggle?this.parentToggle.menuLevel+1:1,this.classes=[]},this.$onChanges=function(n){n.item&&this.item&&(this.item.href?(this.href=this.item.href,this.target=this.item.target||"_self"):(this.href=t.href(this.item.name),this.target="_self"),this.item.menuText?this.menuText=this.item.menuText:this.item.menuTr?e.tr(this.item.menuTr).then(t=>{this.menuText=t}):this.menuText=this.item.name||"")},this.$doCheck=function(){this.menuActive=t.includes(this.item.name)},this.followLink=function(e){2!==e.which&&(e.preventDefault(),t.go(this.item.name,{sidebar:!1}))}}v.$inject=["$state","maTranslate"];var b={controller:v,template:f.a,bindings:{item:"<menuItem"},require:{parentToggle:"?^^maMenuToggle"}},y=n(3349),$=n.n(y);function w(t,e,n,a,i){this.$onInit=function(){this.menuLevel=this.parentToggle?this.parentToggle.menuLevel+1:1,this.height=0,this.addedHeight=0,a.$on("$stateChangeSuccess",function(e,n,a,i,o){t.includes(this.item.name)&&this.open()}.bind(this))},this.$onChanges=function(t){if(t.openMenu&&(!this.isOpen||this.openMenu&&0===this.openMenu.name.indexOf(this.item.name)||this.close()),t.item){if(!t.item.isFirstChange()){const n=this.menu.visibleMap[t.item.currentValue.name];n.visibleChildren!==this.prevVisibleChildren&&(this.prevVisibleChildren=n.visibleChildren,e(function(){this.calcHeight()}.bind(this),0))}this.menuText=this.item.menuText,this.menuText||i.tr(this.item.menuTr).then(function(t){this.menuText=t}.bind(this))}},this.isVisible=function(t){return!!this.menu&&this.menu.visibleMap[t.name].visible},this.$postLink=function(){this.$ul=n.find("ul"),e(function(){this.calcHeight(),t.includes(this.item.name)&&!this.isOpen&&this.open()}.bind(this),0)},this.open=function(){this.isOpen||(this.isOpen=!0,this.parentToggle&&this.parentToggle.addHeight(this.height),this.menu.menuOpened(this))},this.close=function(){this.isOpen&&(this.isOpen=!1,this.parentToggle&&this.parentToggle.addHeight(-this.height),this.menu.menuClosed(this))},this.toggle=function(){this.isOpen?this.close():this.open()},this.calcHeight=function(){this.preMeasureHeight(),this.height=this.$ul.prop("clientHeight"),this.postMeasureHeight()},this.preMeasureHeight=function(){this.parentToggle&&this.parentToggle.preMeasureHeight(),this.$ul.css({height:"",visibility:"hidden",position:"absolute",transition:"none !important"}),(this.wasHidden=this.$ul.hasClass("ng-hide"))&&this.$ul.removeClass("ng-hide")},this.postMeasureHeight=function(t){this.wasHidden&&this.$ul.addClass("ng-hide"),delete this.wasHidden,this.$ul.css({height:this.height+this.addedHeight+"px",visibility:"",position:"",transition:""}),this.parentToggle&&this.parentToggle.postMeasureHeight()},this.addHeight=function(t){this.addedHeight+=t,this.$ul.css({height:this.height+this.addedHeight+"px"})}}w.$inject=["$state","$timeout","$element","$scope","maTranslate"];var x={controller:w,require:{menu:"^^maUiMenu",parentToggle:"?^^maUiMenuToggle"},template:$.a,bindings:{item:"<menuItem",openMenu:"<"}},T=n(3350),I=n.n(T);function S(t,e,n,a,o){return{scope:{},template:I.a,link:function(r,s){function l(){let t=s[0];for(;t=t.parentElement;)if("MD-CONTENT"===t.tagName){t.scrollTop=0;break}}function m(t){let e;r.menuHierarchy=t,r.path=[],r.enterSubmenu(null,r.menuHierarchy),r.menuHierarchy.children.some(function(t){return e="ui"===t.name&&t}),e&&r.enterSubmenu(null,e)}r.menuEditor={},r.$mdMedia=a,r.getHierarchy=function(){t.getMenuHierarchy().then(m)},r.getHierarchy(),r.enterSubmenu=function(t,e){r.path.push(e),r.currentItem=e,r.getChildren(),l()},r.goToIndex=function(t,e){r.path.splice(e+1,r.path.length-1-e),r.currentItem=r.path[r.path.length-1],r.getChildren(),l()},r.getChildren=function(){r.currentItem.children?r.editItems=r.currentItem.children.sort(function(t,e){return t.weight<e.weight?-1:t.weight>e.weight?1:t.name<e.name?-1:t.name>e.name?1:0}):r.editItems=[]},r.updateWeights=function(t,e){let n=-1/0;r.currentItem.children.forEach(function(t,e,a){t.weight>n?n=t.weight:(0!==e&&a[e-1].name>t.name&&n++,t.weight=n)})},r.uiSortableOptions={handle:"> td > .move-handle",stop:r.updateWeights},r.deleteCustomMenu=function(a){const i=e.confirm().title(n.trSync("ui.app.areYouSure")).textContent(n.trSync("ui.app.confirmRestoreDefaultMenu")).ariaLabel(n.trSync("ui.app.areYouSure")).targetEvent(a).ok(n.trSync("common.ok")).cancel(n.trSync("common.cancel"));e.show(i).then(function(){t.deleteMenu().then(m)})},r.removeItem=function(t){r.editItems.some(function(e,n,a){if(t.name===e.name)return a.splice(n,1),!0})},r.editItem=function(e,n){n||(n={isNew:!0,name:r.currentItem.name?r.currentItem.name+".":"",url:"/",parent:r.currentItem,linkToPage:!0,permission:"user"});const a=n.parent,s=n.isNew;o.editMenuItem(e,r.menuHierarchy,n).then(function(e){const o=e.parent;if(s||!e.deleted&&a===o||(a.children.some(function(t,e,a){if(t.name===n.name)return a.splice(e,1)}),a.children.length||delete a.children,!e.deleted)){if(!s){const a=n.children;e.name!==n.name&&t.forEach(a,function(t){const a=n.name+".";0===t.name.indexOf(a)?t.name=e.name+"."+t.name.substring(a.length):console.warn("child has invalid name",t)}),delete e.children,delete e.parent,(e=i.a.copy(e,n)).children=a,e.parent=o}(s||a!==o)&&(o.children||(o.children=[]),o.children.push(e)),r.getChildren()}},()=>null)},r.saveMenu=function(){t.saveMenu(r.menuHierarchy).then(m)}}}}S.$inject=["maUiMenu","$mdDialog","maTranslate","$mdMedia","maUiMenuEditor"];var P=S,C=n(3351),E=n.n(C);function L(){return{scope:!0,template:E.a,controller:A,controllerAs:"$ctrl",bindToController:{}}}function A(){this.showEditor=!0,this.showPreview=!0}L.$inject=[],A.$inject=[],A.prototype.markupChanged=function(t){t&&(this.page.jsonData.markup=t),this.page.$dirty=!0};var N=L,O=n(3352),k=n.n(O);const M=t=>{const e={};return e.xid=t.xid,e.name=t.name,e.editPermission=t.editPermission,e.readPermission=t.readPermission,e};class F{static get $$ngIsClass(){return!0}static get $inject(){return["$scope","maUiPages","maJsonStoreEventManager","MA_UI_PAGES_XID","maUiMenuEditor","$state","localStorageService","$mdDialog","$mdToast","maTranslate","maUiMenu","$window","maUser","$q","MA_UI_EDIT_MENUS_PERMISSION","$templateRequest","$document","maDialogHelper","maRevisionHistoryDialog"]}constructor(t,e,n,a,i,o,r,s,l,m,d,c,u,p,h,g,f,v,b){this.$scope=t,this.maUiPages=e,this.jsonStoreEventManager=n,this.MA_UI_PAGES_XID=a,this.MenuEditor=i,this.$state=o,this.localStorageService=r,this.$mdDialog=s,this.$mdToast=l,this.Translate=m,this.Menu=d,this.$window=c,this.User=u,this.$q=p,this.MA_UI_EDIT_MENUS_PERMISSION=h,this.$templateRequest=g,this.$document=f,this.maDialogHelper=v,this.maRevisionHistoryDialog=b,this.showInputs=!1}$onInit(){const t=this.Translate,e=this.$window,n=this.$document;this.jsonStoreEventManager.smartSubscribe(this.$scope,this.MA_UI_PAGES_XID,["add","update"],(t,e)=>{this.pageSummaryStore.jsonData=e.object.jsonData,this.filterPages()}),this.$scope.$on("$stateChangeStart",(n,a,i,o,r)=>{n.defaultPrevented||(this.pageEditorForm.$dirty||this.selectedPage.$dirty)&&(e.confirm(t.trSync("ui.app.discardUnsavedChanges"))||n.preventDefault())});const a=e.onbeforeunload;e.onbeforeunload=(e=>{if(this.inputsDirty()||this.selectedPage.$dirty){const n=t.trSync("ui.app.discardUnsavedChanges");return e.returnValue=n,n}});const i=this.keyDownHandler.bind(this);n.on("keydown",i),this.$scope.$on("$destroy",function(){e.onbeforeunload=a,n.off("keydown",i)}),this.maUiPages.getPages().then(t=>{this.pageSummaryStore=t,this.filterPages()},t=>{this.pageSummaryStore=null,this.maDialogHelper.toastOptions({textTr:["ui.app.errorGettingPages","error.mangoStatusText"],hideDelay:1e4,classes:"md-warn"})});const o=this.localStorageService.get("lastSelectedPage");this.$state.params.pageXid?this.loadPage(this.$state.params.pageXid):this.$state.params.templateUrl?this.$templateRequest(this.$state.params.templateUrl).then(this.createNewPage.bind(this)):this.$state.params.markup?this.createNewPage(this.$state.params.markup):o&&o.pageXid?this.loadPage(o.pageXid):this.createNewPage()}filterPages(){const t=this.User.current;this.pageList=this.pageSummaryStore.jsonData.pages.filter(e=>t.hasPermission(e.editPermission))}createNewPage(t){const e=this.maUiPages.newPageContent();return!t&&this.newPageContents&&(t=this.newPageContents()),e.jsonData.markup=t||"",this.menuItem=null,this.showInputs=!0,this.setSelectedPage(e)}inputsDirty(){const t=this.pageEditorForm;return t.pageName.$dirty||t.readPermission.$dirty||t.editPermission.$dirty}confirmLoadPage(t){(!this.inputsDirty()&&!this.selectedPage.$dirty||this.$window.confirm(this.Translate.trSync("ui.app.discardUnsavedChanges")))&&(t?this.loadPage(t):this.createNewPage())}loadPage(t){const e=this.MenuEditor.getMenuItemForPageXid(t).then(t=>{this.menuItem=t},i.a.noop),n=this.maUiPages.loadPage(t).then(t=>(this.localStorageService.set("lastSelectedPage",{pageXid:t.xid}),t));return this.$q.all([e,n]).then(t=>(this.showInputs=!1,this.setSelectedPage(t[1])),()=>this.createNewPage())}setSelectedPage(t,e){return null==e&&(e=!0),this.selectedPage=t,this.selectedPageSummary=M(t),this.updateViewLink(),this.pageEditorForm&&(this.pageEditorForm.$setPristine(),this.pageEditorForm.$setUntouched()),e&&this.onPageChanged&&this.onPageChanged({$page:t}),t}updateViewLink(){const t=this.selectedPage.isNew?null:this.selectedPage.xid;this.menuItem?this.viewPageLink=this.$state.href(this.menuItem.name):this.viewPageLink=this.$state.href("ui.viewPage",{pageXid:t}),this.$state.params.pageXid=t,this.$state.go(".",this.$state.params,{location:"replace",notify:!1})}editMenuItem(t){const e={menuText:this.selectedPage.name,permission:this.selectedPage.readPermission};return this.MenuEditor.editMenuItemForPageXid(t,this.selectedPage.xid,e).then(t=>{this.menuItem=t,this.updateViewLink()})}confirmDeletePage(t){const e=this.Translate,n=this.$mdDialog.confirm().title(e.trSync("ui.app.areYouSure")).textContent(e.trSync("ui.app.confirmDeletePage")).ariaLabel(e.trSync("ui.app.areYouSure")).targetEvent(t).ok(e.trSync("common.ok")).cancel(e.trSync("common.cancel"));return this.$mdDialog.show(n).then(this.deletePage.bind(this))}deletePage(){const t=this.selectedPage.xid,e=this.selectedPage.$delete().then(null,i.a.noop);let n;n=this.menuItem?this.Menu.removeMenuItem(this.menuItem.name).then(null,i.a.noop):this.$q.when(),this.$q.all([e,n]).then(()=>{const e=this.pageSummaryStore.jsonData.pages;for(let n=0;n<e.length;n++)if(e[n].xid===t){e.splice(n,1);break}return this.createNewPage(),this.pageSummaryStore.$save().then(t=>{this.filterPages()})})}savePage(){if(this.pageEditorForm.$setSubmitted(),this.pageEditorForm.$valid)return this.selectedPage.$save().then(t=>{this.showInputs=!1,this.localStorageService.set("lastSelectedPage",{pageXid:t.xid}),this.selectedPageSummary=M(t),this.updateViewLink(),this.pageEditorForm.$setPristine(),this.pageEditorForm.$setUntouched();const e=this.pageSummaryStore.jsonData.pages;let n=!1;for(let a=0;a<e.length;a++)if(e[a].xid===t.xid){i.a.copy(this.selectedPageSummary,e[a]),n=!0;break}return n||e.push(this.selectedPageSummary),this.pageSummaryStore.$save()}).then(t=>{this.filterPages();const e=this.$mdToast.simple().textContent(this.Translate.trSync("ui.app.pageSaved",[this.selectedPageSummary.name])).action(this.Translate.trSync("common.ok")).highlightAction(!0).position("bottom center").hideDelay(5e3);this.$mdToast.show(e)},t=>{const e=this.$mdToast.simple().textContent(this.Translate.trSync("ui.app.errorSavingPage",[this.selectedPage.name,t.mangoStatusText])).action(this.Translate.trSync("common.ok")).highlightAction(!0).position("bottom center").toastClass("md-warn").hideDelay(1e4);this.$mdToast.show(e)});this.showInputs=!0}keyDownHandler(t){(t.ctrlKey||t.metaKey)&&83===t.which&&(t.preventDefault(),this.$scope.$applyAsync(()=>{this.savePage()}))}showRevisionDialog(t){this.maRevisionHistoryDialog.show(t,{typeName:"JSON_DATA",objectId:this.selectedPage.id,filterValues:t=>t.context&&!!t.context.jsonData}).then(t=>{this.selectedPage.jsonData=i.a.fromJson(t.context.jsonData),this.selectedPage.$dirty=!0,this.onPageChanged&&this.onPageChanged({$page:this.selectedPage})},i.a.noop)}}function D(){return{restrict:"E",scope:{},template:k.a,controller:F,controllerAs:"$ctrl",bindToController:{onPageChanged:"&?",newPageContents:"&?"},transclude:{extraControls:"?extraControls"}}}D.$inject=[];var U=D,R=n(3353),B=n.n(R);const _=function(){return{template:function(t,e){const n=t.html().trim();return t.empty(),n&&t.data("htmlContent",n),B.a},link:function(t,e,n){let a=e.data("htmlContent");e.removeData("htmlContent"),a=a.replace(new RegExp('=""',"g"),""),t.text=a}}};_.$inject=[];var H=_,V=n(3354),j=n.n(V);const q=function(t,e){this.$onInit=function(){this.storedUsername=t.storedUsername()},this.checkUser=function(){this.username&&t.get({username:this.username}).$promise.then(function(t){e.autoLoginSettings.username.$setValidity("notFound",!0),e.autoLoginSettings.username.$setValidity("adminUser",!t.hasPermission("superadmin"))},function(){e.autoLoginSettings.username.$setValidity("notFound",!1),e.autoLoginSettings.username.$setValidity("adminUser",!0)})},this.saveCredentials=function(){e.autoLoginSettings.$valid&&(t.storeCredentials(this.username,this.password),this.storedUsername=this.username)},this.deleteCredentials=function(){t.clearStoredCredentials(),this.storedUsername=null}};q.$inject=["maUser","$scope"];var X={controller:q,template:j.a},Y=n(3355);var G={controller:class{static get $$ngIsClass(){return!0}static get $inject(){return["maEvents","$scope","$timeout"]}constructor(t,e,n){this.maEvents=t,this.refreshCount().then(()=>{t.notificationManager.subscribe((t,e)=>{this.counter(e,t.name)},e,["RAISED","ACKNOWLEDGED"]),e.$on("maWatchdog",(t,e,a)=>{"LOGGED_IN"===e.status&&n(()=>{this.refreshCount()},5e3)})})}refreshCount(){return this.maEvents.getActiveSummary().$promise.then(t=>(this.events={totalCount:0},t.forEach((t,e,n)=>{this.events[t.level]=t,this.events.totalCount+=t.unsilencedCount}),this.events))}renderCount(t){return t<1e3?t:"> 999"}counter(t,e){if("RAISED"===e){if(t.id<0)return;this.events[t.alarmLevel].unsilencedCount++,this.events.totalCount++}else"ACKNOWLEDGED"===e&&(this.events[t.alarmLevel].unsilencedCount--,this.events.totalCount--)}},template:n.n(Y).a},W=n(3356),z=n.n(W);function K(t,e,n,a,o,r){this.params=r,this.stateParams=e,this.rollupTypes=a,this.timePeriodTypes=o,this.mdMedia=t,this.$onInit=function(){this.calcAutoRollup(),this.updateIntervalFromRollupInterval(),this.calcUpdateIntervalString(),this.checkAutoSimplifyTolerance(),this.prevSettings=i.a.copy(this.params.data)},this.$doCheck=function(){i.a.equals(this.params.data,this.prevSettings)||(this.prevSettings=i.a.copy(this.params.data),this.calcAutoRollup(),this.updateIntervalFromRollupInterval(),this.calcUpdateIntervalString(),this.checkAutoSimplifyTolerance())},this.updateIntervalFromRollupInterval=function(){(!this.form||(!this.form.updateIntervals||this.form.updateIntervals.$pristine)&&(!this.form.updateIntervalPeriod||this.form.updateIntervalPeriod.$pristine))&&(this.params.updateIntervals=this.params.rollupIntervals,this.params.updateIntervalPeriod=this.params.rollupIntervalPeriod)},this.calcUpdateIntervalString=function(){this.params.updateIntervalString=this.params.autoUpdate?this.params.updateIntervals+" "+this.params.updateIntervalPeriod:""},this.calcAutoRollup=function(){if(this.params.autoRollup){const t=n.rollupIntervalCalculator(this.params.from,this.params.to,this.params.rollupType,!0);this.params.rollupIntervals=t.intervals,this.params.rollupIntervalPeriod=t.units,this.updateIntervalFromRollupInterval()}},this.checkAutoSimplifyTolerance=function(){this.autoSimplifyTolerance=this.params.simplifyTolerance<0}}K.$inject=["$mdMedia","$stateParams","maUtil","MA_ROLLUP_TYPES","MA_TIME_PERIOD_TYPES","maUiDateBar"];var J={template:z.a,controller:K,bindings:{onRefresh:"&"}},Q=n(3357),Z=n.n(Q),tt=n(2),et=n.n(tt);function nt(t){this.Modules=t,this.year=et()().year(),this.productName="Mango Automation"}nt.$inject=["maModules"],nt.prototype.$onChanges=function(t){},nt.prototype.$onInit=function(){this.Modules.getCore().then(function(t){this.coreModule=t}.bind(this))};var at={controller:nt,template:Z.a},it=n(3358),ot=n.n(it);n(3359);const rt="upgradesBanner";var st={template:ot.a,controller:class{static get $$ngIsClass(){return!0}static get $inject(){return["$scope","maModules","localStorageService"]}constructor(t,e,n){this.$scope=t,this.maModules=e,this.localStorageService=n}$onInit(){this.settings=this.localStorageService.get(rt)||{},this.setAvailableUpgrades(this.maModules.availableUpgrades()),this.$scope.$on("maAvailableUpgrades",(t,e)=>{this.setAvailableUpgrades(e.current)})}setAvailableUpgrades(t){this.availableUpgrades=t,0===t&&(this.settings.dismissed=!1),this.localStorageService.set(rt,this.settings)}dismiss(){this.settings.dismissed=!0,this.localStorageService.set(rt,this.settings)}}};const lt=i.a.module("maUiRootState",[]).factory("maUiMenuEditor",l).directive("maUiMenuEditor",P).directive("maUiPageEditor",N).directive("maUiPageEditorControls",U).directive("maUiDualPaneEditor",H).component("maUiJsonStoreMenu",d).component("maUiMenu",h).component("maUiMenuLink",b).component("maUiMenuToggle",x).component("maUiAutoLoginSettings",X).component("maUiActiveEventIcons",G).component("maUiDateBar",J).component("maUiFooter",at).component("maUiUpgradesBanner",st);e.default=lt}}]);