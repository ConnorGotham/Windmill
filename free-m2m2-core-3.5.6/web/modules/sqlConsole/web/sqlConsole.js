!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof exports?exports.sqlConsole=t(require("angular")):e.sqlConsole=t(e.angular)}(window,function(e){return function(e){function t(t){for(var n,o,a=t[0],s=t[1],l=0,c=[];l<a.length;l++)o=a[l],r[o]&&c.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(i&&i(t);c.length;)c.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,o){n=r[e]=[t,o]});t.push(n[2]=a);var s,l=document.getElementsByTagName("head")[0],i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=function(e){return o.p+""+({}[e]||e)+".js?v="+{1:"34fc723dcb2f0295ab80"}[e]}(e),s=function(t){i.onerror=i.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+o+": "+a+")");s.type=o,s.request=a,n[1](s)}r[e]=void 0}};var c=setTimeout(function(){s({type:"timeout",target:i})},12e4);i.onerror=i.onload=s,l.appendChild(i)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/modules/sqlConsole/web/",o.oe=function(e){throw console.error(e),e};var a=window.webpackJsonpsqlConsole=window.webpackJsonpsqlConsole||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var i=s;return o(o.s=2)}([function(t,n){t.exports=e},function(e,t){e.exports='<div layout="row" style="padding: 10px">\n    <div flex>\n        <md-icon class="md-warn">warning</md-icon>\n        <span ma-tr="sql.warning"></span>\n    </div>\n</div>\n\n<div layout="column">\n    <md-card flex="100">\n        <md-card-content>\n            <ma-ace-editor style="height: 100px" selection-changed="$ctrl.selection = $text" mode="sql" ng-model="$ctrl.queryString"></ma-ace-editor>\n            <div layout="column" layout-gt-xs="row" layout-align="center center">\n                <md-button class="md-raised" ng-click="$ctrl.getTables($event)">\n                    <span ma-tr="sql.tableList"></span>\n                </md-button>\n                <md-button class="md-raised md-primary" ng-click="$ctrl.query($ctrl.queryString)">\n                    <span ma-tr="sql.query"></span>\n                </md-button>\n                <md-button class="md-raised md-primary" ng-click="$ctrl.runSelectedQuery($ctrl.selection)">\n                    <span ma-tr="sql.runSelectedSql"></span>\n                </md-button>\n                <md-button class="md-raised md-warn" ng-click="$ctrl.update($ctrl.queryString)">\n                    <span ma-tr="sql.update"></span>\n                </md-button>\n            </div>\n        </md-card-content>\n    </md-card>\n    <md-card flex="100" ng-if="$ctrl.rows">\n        <md-card-content flex>\n            <md-table-container ng-if="$ctrl.rows">\n                <table md-table>\n                    <thead md-head md-order="query.order">\n                        <tr md-row>\n                            <th md-column ng-repeat="header in $ctrl.tableHeaders">{{header}}</th>\n                        </tr>\n                    </thead>\n                    <tbody md-body>\n                        <tr md-row ng-repeat="row in $ctrl.rows | limitTo: $ctrl.query.limit: ($ctrl.query.page - 1) * $ctrl.query.limit">\n                            <td md-cell ng-repeat="cell in row track by $index">{{ cell }}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </md-table-container>\n\n            <md-table-pagination ng-if="$ctrl.rows" md-limit="$ctrl.query.limit" md-limit-options="[5, 10, 20]" md-page="$ctrl.query.page" md-total="{{$ctrl.rows.length}}" md-page-select></md-table-pagination>\n        </md-card-content>\n    </md-card>\n</div>'},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(1),s=n.n(a);const l=Object.freeze(["$rootScope","$scope","$http","maSqlConsole","maDialogHelper"]);var i={template:s.a,controller:class{static get $inject(){return l}static get $$ngIsClass(){return!0}constructor(e,t,n,r,o){this.$rootScope=e,this.$scope=t,this.$http=n,this.maSqlConsole=r,this.maDialogHelper=o,this.query.limit=5,this.query.page=1}$onInit(){}getTables(){this.maSqlConsole.getTables().then(e=>{this.tableHeaders=e.headers,this.rows=e.data})}query(e){this.maSqlConsole.query(e).then(e=>{this.tableHeaders=e.headers,this.rows=e.data},e=>{this.maDialogHelper.toastOptions({text:e.data.cause,classes:"md-warn",hideDelay:5e3})})}update(e){this.maSqlConsole.update(e).then(e=>{this.maDialogHelper.toastOptions({textTr:["sql.rowsUpdated",e],hideDelay:3e3})},e=>{this.maDialogHelper.toastOptions({text:e.data.cause,classes:"md-warn",hideDelay:5e3})})}runSelectedQuery(e){""===this.selection.trim()&&this.maDialogHelper.toastOptions({textTr:"sql.emptySelection",classes:"md-warn",hideDelay:3e3}),this.selection.includes("SELECT")?this.query(e):this.update(e)}},bindings:{},require:{},designerInfo:{translation:"maintenanceEvents.list",icon:"list"}};function c(e){const t="/rest/v2/sql-console";return class extends e{static get baseUrl(){return t}getTables(){return this.constructor.http({url:`${this.constructor.baseUrl}/list-tables`,method:"GET"}).then(e=>e.data)}query(e){return this.constructor.http({url:`${this.constructor.baseUrl}`,method:"GET",params:{query:e}}).then(e=>e.data)}update(e){return this.constructor.http({url:`${this.constructor.baseUrl}`,method:"POST",data:e,headers:{"Content-Type":"application/sql"}}).then(e=>e.data)}static getTables(){return new this({}).getTables()}static query(e){return new this({}).query(e)}static update(e){return new this({}).update(e)}}}c.$inject=["maRestResource"];var d=c;const u=o.a.module("maSqlConsole",[]).component("maSqlConsole",i).factory("maSqlConsole",d).config(["maUiMenuProvider",function(e){e.registerMenuItems([{name:"ui.settings.sqlConsole",url:"/sql-console",template:"<ma-sql-console></ma-sql-console>",menuTr:"header.sql",menuIcon:"storage",permission:"superadmin",weight:2e3,params:{noPadding:!1,hideFooter:!1,helpPage:"ui.help.sqlConsole"}},{name:"ui.help.sqlConsole",url:"/sql-console/help",resolve:{viewTemplate:function(){return n.e(1).then(n.t.bind(null,3,7))}},menuTr:"header.sql"}])}]);t.default=u}]).default});